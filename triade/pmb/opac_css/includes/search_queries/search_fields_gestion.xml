<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- $Id: search_fields_gestion.xml,v 1.53 2019-05-22 12:49:36 ngantier Exp $ -->

	<!-- 
	Copie multi-criteres de gestion utilisée pour le calcul des vues 
	ATTENTION : Ne contient pas de clauses order by pour accélérer les choses 
	-->


<pmbfields>
	
	<!-- Zone fixedFields :
		Liste des champs de recherche possibles de la base de données
		Chaque champ est modélisé par le tag <field> :
		<field @att=id,title,memoryEngineForbidden> 
			-id : numéro unique arbitraire
			-title : Texte qui sera affiché dans l'écran de recherche
			-memoryEngineForbidden : "yes" interdit l'utilisation du moteur memory pour la création des tables temporaires
			<field> contient les sous tags :
				<input @type> : type de saisie
					-type (text|list) : 
						@type=list (dans le cas d'une saisie par liste), input contient les sous champs :
						 	<queryList> : requete pour récupérer les values de la liste. La requete doit avoir 2 colonnes
										  -la première donne le code à retourner
										  -la deuxième donne le libellé dans la liste
										  
				<query> : requete associée au champ et à l'opérateur
				<query @att=for,multipleWords,regDiacrit>
					-for : nom de l'opérateur auquel correspond la requete 
					 (les opérateurs non listés ne seront pas pris en compte), 
					-multipleWords (yes|no) : la requete tient compte de plusieurs termes saisis avec des espaces
					-regDiacrit (yes|no) : les termes sont passés par la fonction de nettoyage des mots vides et des accents
			 		<query> contient les sous tags :
					
						<main> : Corps principal de la requete, 
							-!!p!! sera remplacé dans la requete par le texte saisi pour la recherche, 
							-!!multiple_term!! (uniquement si multipleWords="yes") sera remplacé par la série 
							 de tests de la clause where pour chaque mot saisi
						
						<multipleTerm> : terme de condition utilisé pour remplacer !!multiple_term!!
						<multipleOperator> : opérateur utilisé entre les termes de conditions 
	-->
	<memoryEngineAllowed>yes</memoryEngineAllowed>
	<fixedFields>
		<field group="1" title="msg:233" id="1">
			<input type="text"/>
			<query for="BOOLEAN" booleanSearch="yes">
				<main><![CDATA[select notice_id, !!pert_term!! as pert from notices where !!where_term!! group by notice_id ]]></main>
				<table>notices</table>
				<index_l>index_wew</index_l>
				<index_i>index_sew</index_i>
				<id_field>notice_id</id_field>
			</query>
			<query for="STARTWITH">
				<main><![CDATA[select distinct notice_id from notices where (tit1 like '!!p!!%') ]]></main>
			</query>
			<query for="ENDWITH">
				<main><![CDATA[select distinct notice_id from notices where (tit1 like '%!!p!!') ]]></main>
			</query>
			<query for="EXACT">
				<main><![CDATA[select distinct notice_id from notices where (tit1='!!p!!') ]]></main>
			</query>
		</field>
		<field group="1" title="msg:global_search" id="42">
			<input type="text"/>
			<variable name="pmb_indexation_docnum_allfields" type="global" />
			<variable name="ck_affiche" type="input">
				<var name="pmb_indexation_docnum" visibility="yes" hidden="no">
					<value visibility="no">0</value>
				</var>
				<default type="value">0</default>
				<input type="hidden">
					<value>1</value>
				</input> 
			</variable>
			<variable name= "is_num" type="input" comment="msg:docnum_indexation">
				<var name="pmb_indexation_docnum" visibility="yes" hidden="no">
					<value visibility="no">0</value>
				</var>
				<default type="var">pmb_indexation_docnum_allfields</default>
				<input type="checkbox" default_on="ck_affiche">
					<value>1</value>
					<comments>
						<label value="1">msg:40</label>
						<label value="0">msg:39</label>
					</comments>
				</input>
			</variable>
			<query for="BOOLEAN"  conditional="yes">
				<var name="is_num" booleanSearch="yes">
					<value>default</value>
					<main><![CDATA[select notice_id, ((!!pert_term_1!!)+(!!pert_term_3!!)*0.5) as pert from notices_global_index,notices where ((!!where_term_1!!) or (!!where_term_2!!)) and notice_id=num_notice and no_index=1 group by notice_id ]]></main>
					<boolean>
						<table>notices_global_index</table>
						<index_l>infos_global</index_l>
						<index_i>index_infos_global</index_i>
						<id_field>num_notice</id_field>
						<keep_empty_words>yes</keep_empty_words>
					</boolean>
					<boolean>
						<table>notices_global_index</table>
						<index_l>infos_global</index_l>
						<index_i>index_infos_global</index_i>
						<id_field>num_notice</id_field>
					</boolean>
					<boolean>
						<table>notices</table>
						<index_l>index_wew</index_l>
						<index_i>index_sew</index_i>
						<id_field>notice_id</id_field>
					</boolean>
				</var>
				<var name="is_num" booleanSearch="yes">
					<value>1</value>
					<main><![CDATA[select uni.notice_id, pert from (
							select notice_id, ((!!pert_term_2!!)+(!!pert_term_1!!)*0.5)+ifnull((!!pert_term_3!!),0) as pert from notices 
							join notices_global_index on num_notice=notice_id
							left join explnum on explnum_notice=notice_id 
							where ((!!where_term_2!!) or (!!where_term_3!!)) 
							and notice_id=num_notice group by notice_id 
							UNION
							select if(num_notice,num_notice,bulletin_notice) as notice_id, ifnull((!!pert_term_3!!),0) as pert from explnum
							join bulletins on explnum_bulletin=bulletin_id
							where ((!!where_term_3!!))
							group by notice_id
						) as uni join notices n on n.notice_id=uni.notice_id 
					]]></main>
					<boolean>
						<table>notices</table>
						<index_l>index_wew</index_l>
						<index_i>index_sew</index_i>
						<id_field>notice_id</id_field>
					</boolean>
					<boolean>
						<table>notices_global_index</table>
						<index_l>infos_global</index_l>
						<index_i>index_infos_global</index_i>
						<id_field>num_notice</id_field>
					</boolean>
					<boolean>
						<table>explnum</table>
						<index_l>explnum_index_wew</index_l>
						<index_i>explnum_index_sew</index_i>
						<id_field>explnum_notice</id_field>
						<fulltext>yes</fulltext>
					</boolean>
				</var>
			</query>
		</field>
		<field group="1" title="msg:234" id="2">
			<input type="authoritie" ajax="authors" selector="auteur" p1="param1" p2="param2"/>
			<variable name= "operator_between_multiple_authorities" type="input" comment="msg:operator_between_multiple_authorities">
				<default type="value">or</default>
				<input type="radio">
					<options>
						<label value="or">msg:operator_between_multiple_authorities_or</label>
						<label value="and">msg:operator_between_multiple_authorities_and</label>
					</options>
				</input>
			</variable>
			<query for="BOOLEAN" booleanSearch="yes">
				<main><![CDATA[select responsability_notice as notice_id, !!pert_term!! as pert from responsability, authors where (!!where_term!!) and responsability_author=author_id group by notice_id]]></main>
				<table>authors</table>
				<index_l>concat(author_name,', ',author_rejete)</index_l>
				<index_i>index_author</index_i>
				<id_field>author_id</id_field>
				<keep_empty_words>yes</keep_empty_words>
			</query>
			<query for="STARTWITH" regDiacrit="yes" Keep_EmptyWord="yes">
				<main><![CDATA[select distinct responsability_notice as notice_id from responsability, authors where index_author like ' !!p!!%' and responsability_author=author_id]]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes" Keep_EmptyWord="yes">
				<main><![CDATA[select distinct responsability_notice as notice_id from responsability, authors where index_author like '%!!p!! ' and responsability_author=author_id]]></main>
			</query>
			<query for="EXACT" regDiacrit="yes" Keep_EmptyWord="yes">
				<main><![CDATA[select distinct responsability_notice as notice_id from responsability, authors where index_author=' !!p!! ' and responsability_author=author_id]]></main>
			</query>
			<query for="AUTHORITY">
				<main><![CDATA[select distinct responsability_notice as notice_id from responsability,authors where responsability_author=' !!p!! ' and responsability_author=author_id]]></main>
			</query>
			<query for='ISEMPTY'>
				<main><![CDATA[SELECT distinct notice_id from notices left join responsability on responsability_notice = notice_id where responsability_author is null]]></main>
			</query>
			<query for='ISNOTEMPTY'>
				<main><![CDATA[SELECT distinct notice_id from notices join responsability on responsability_notice = notice_id join authors on responsability_author=author_id]]></main>
			</query>			
		</field>	
		<field group="1" title="msg:recherche_fonction_auteur" id="49">
			<input type="marc_list">
				<name>function</name>
				<restrictquery>SELECT group_concat(distinct responsability_fonction SEPARATOR ',') as all_responsability_fonction from responsability</restrictquery>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct responsability_notice as notice_id from responsability where responsability_fonction='!!p!!']]></main>
			</query>
			<query for="ISEMPTY">
				<main><![CDATA[SELECT distinct responsability_notice as notice_id from responsability where responsability_fonction='']]></main>
			</query>
			<query for="ISNOTEMPTY">
				<main><![CDATA[SELECT distinct responsability_notice as notice_id from responsability where responsability_fonction!='']]></main>
			</query>
		</field>
		<field group="1" title="msg:responsability_qualification_query" id="92" >
			<input type="authoritie" ajax="vedette" selector="vedette" p1="p1" p2="p2" />
			<var name="pmb_authors_qualification" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<variable name="grammars" type="input">
				<input type="hidden">
					<value>notice_authors</value>
				</input> 
			</variable>
			<variable name= "with_70" type="input" comment="msg:244">
				<default type="value">1</default>
				<input type="checkbox">
					<value>1</value>
					<comments>
						<label value="1">msg:40</label>
						<label value="0">msg:39</label>
					</comments>
				</input>
			</variable>
			<variable name= "with_71" type="input" comment="msg:246">
				<default type="value">1</default>
				<input type="checkbox">
					<value>1</value>
					<comments>
						<label value="1">msg:40</label>
						<label value="0">msg:39</label>
					</comments>
				</input>
			</variable>
			<variable name= "with_72" type="input" comment="msg:247">
				<default type="value">1</default>
				<input type="checkbox">
					<value>1</value>
					<comments>
						<label value="1">msg:40</label>
						<label value="0">msg:39</label>
					</comments>
				</input>
			</variable> 
			<query for="CONTAINS_AT_LEAST" multipleWords="yes" regdiacrit="no">
				<main><![CDATA[select distinct notice_id from notices 
				join responsability on responsability.responsability_notice = notices.notice_id
				and (responsability.responsability_type = (case '!!with_70!!' when '1' then '070' else '' end) 
				or responsability.responsability_type = (case '!!with_71!!' when '1' then '071' else '' end) 
				or responsability.responsability_type = (case '!!with_72!!' when '1' then '072' else '' end))
				join vedette_link on vedette_link.num_object = responsability.id_responsability and vedette_link.type_object in (3,4,5)
				join vedette on vedette.id_vedette = vedette_link.num_vedette
				where vedette.grammar in('!!grammars!!') and (!!multiple_term!!)]]></main>
				<multipleTerm>vedette.label like '%!!p!!%'</multipleTerm>
				<multipleOperator>or</multipleOperator>
			</query>
			<query for="CONTAINS_ALL" multipleWords="yes" regDiacrit="no">
				<main><![CDATA[select distinct notice_id from notices 
				join responsability on responsability.responsability_notice = notices.notice_id
				and (responsability.responsability_type = (case '!!with_70!!' when '1' then '070' else '' end) 
				or responsability.responsability_type = (case '!!with_71!!' when '1' then '071' else '' end) 
				or responsability.responsability_type = (case '!!with_72!!' when '1' then '072' else '' end))
				join vedette_link on vedette_link.num_object = responsability.id_responsability and vedette_link.type_object in (3,4,5)
				join vedette on vedette.id_vedette = vedette_link.num_vedette
				where vedette.grammar in('!!grammars!!') and (!!multiple_term!!)]]></main>
				<multipleTerm>vedette.label like '%!!p!!%'</multipleTerm>
				<multipleOperator>and</multipleOperator>
			</query>
			<query for="STARTWITH" regDiacrit="no">
				<main><![CDATA[select distinct notice_id from notices 
				join responsability on responsability.responsability_notice = notices.notice_id
				and (responsability.responsability_type = (case '!!with_70!!' when '1' then '070' else '' end) 
				or responsability.responsability_type = (case '!!with_71!!' when '1' then '071' else '' end) 
				or responsability.responsability_type = (case '!!with_72!!' when '1' then '072' else '' end))
				join vedette_link on vedette_link.num_object = responsability.id_responsability and vedette_link.type_object in (3,4,5)
				join vedette on vedette.id_vedette = vedette_link.num_vedette
				where vedette.grammar in('!!grammars!!') and vedette.label like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="no">
				<main><![CDATA[select distinct notice_id from notices 
				join responsability on responsability.responsability_notice = notices.notice_id
				and (responsability.responsability_type = (case '!!with_70!!' when '1' then '070' else '' end) 
				or responsability.responsability_type = (case '!!with_71!!' when '1' then '071' else '' end) 
				or responsability.responsability_type = (case '!!with_72!!' when '1' then '072' else '' end))
				join vedette_link on vedette_link.num_object = responsability.id_responsability and vedette_link.type_object in (3,4,5)
				join vedette on vedette.id_vedette = vedette_link.num_vedette
				where vedette.grammar in('!!grammars!!') and vedette.label like '%!!p!!']]></main>
			</query>
			<query for="AUTHORITY">
				<main><![CDATA[select distinct notice_id from notices 
				join responsability on responsability.responsability_notice = notices.notice_id
				and (responsability.responsability_type = (case '!!with_70!!' when '1' then '070' else '' end) 
				or responsability.responsability_type = (case '!!with_71!!' when '1' then '071' else '' end) 
				or responsability.responsability_type = (case '!!with_72!!' when '1' then '072' else '' end))
				join vedette_link on vedette_link.num_object = responsability_tu.id_responsability_tu and vedette_link.type_object in (2,6)
				join vedette on vedette.id_vedette = vedette_link.num_vedette
				where vedette.grammar in('!!grammars!!') and vedette_link.num_vedette = '!!p!!']]></main>
			</query>
		</field>
		<field group="1" title="msg:recherche_type_auteur" id="70">
			<input type="list">
				<options>
					<option value="70">msg:203</option>
					<option value="71">msg:204</option>
					<option value="72">msg:congres_libelle</option>
				</options>	
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct responsability_notice as notice_id from responsability, authors where responsability_author=author_id and author_type='!!p!!']]></main>
			</query>
		</field>	
		<field group="1" title="msg:searcher_publisher" id="3">
			<input type="authoritie" ajax="publishers" selector="editeur" p1="p1" p2="p2"/>
			<variable name= "operator_between_multiple_authorities" type="input" comment="msg:operator_between_multiple_authorities">
				<default type="value">or</default>
				<input type="radio">
					<options>
						<label value="or">msg:operator_between_multiple_authorities_or</label>
						<label value="and">msg:operator_between_multiple_authorities_and</label>
					</options>
				</input>
			</variable>
			<query for="BOOLEAN" booleanSearch="yes">
				<main><![CDATA[select notice_id, !!pert_term!! as pert from notices, publishers where (!!where_term!!) and (ed_id=ed1_id or ed_id=ed2_id) group by notice_id]]></main>
				<table>publishers</table>
				<index_l>ed_name</index_l>
				<index_i>index_publisher</index_i>
				<id_field>ed_id</id_field>
				<keep_empty_words>yes</keep_empty_words>
			</query>
			<query for="STARTWITH" regDiacrit="yes" Keep_EmptyWord="yes">
				<main><![CDATA[select distinct notice_id from notices, publishers where (index_publisher like ' !!p!!%') and (ed_id=ed1_id or ed_id=ed2_id)]]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes" Keep_EmptyWord="yes">
				<main><![CDATA[select distinct notice_id from notices, publishers where (index_publisher like '%!!p!! ') and (ed_id=ed1_id or ed_id=ed2_id)]]></main>
			</query>
			<query for="EXACT" regDiacrit="no">
				<main><![CDATA[select distinct notice_id from notices, publishers where (ed_name like '!!p!!') and (ed_id=ed1_id or ed_id=ed2_id)]]></main>
			</query>
			<query for="AUTHORITY">
				<main><![CDATA[select distinct notice_id from notices, publishers where (ed_id=ed1_id or ed_id=ed2_id)  and ed_id = !!p!!]]></main>
			</query>
			<query for='ISEMPTY'>
				<main><![CDATA[select distinct notice_id from notices where ed1_id = 0 and ed2_id = 0]]></main>
			</query>
			<query for='ISNOTEMPTY'>
				<main><![CDATA[select distinct notice_id from (select notice_id,index_sew,index_publisher from notices join publishers on ed1_id=ed_id union select notice_id,index_sew,index_publisher from notices join publishers on ed2_id=ed_id) as t2]]></main>
			</query>	
		</field>
		<field group="1" title="msg:date_publication_or_annee_edition" id="23">
			<input type="text" placeholder="msg:format_date_input_text_placeholder" />
			<query for="EQ" detectDate="__">
				<main><![CDATA[select distinct notice_id from notices where date_parution like '!!p!!']]></main>
			</query>
			<query for="LT" detectDate="min">
				<main><![CDATA[select distinct notice_id from notices where (date_parution<'!!p!!' and date_parution>'0000-00-00')]]></main>
			</query>
			<query for="GT" detectDate="max">
				<main><![CDATA[select distinct notice_id from notices where date_parution>'!!p!!']]></main>
			</query>
			<query for="LTEQ" detectDate="max">
				<main><![CDATA[select distinct notice_id from notices where (date_parution<='!!p!!' and date_parution>'0000-00-00')]]></main>
			</query>
			<query for="GTEQ" detectDate="min">
				<main><![CDATA[select distinct notice_id from notices where date_parution>='!!p!!']]></main>
			</query>
			<query for="ISEMPTY" detectDate="01">
				<main><![CDATA[select distinct notice_id from notices where date_parution like '0000-00-00']]></main>
			</query>
			<query for="ISNOTEMPTY" detectDate="01">
				<main><![CDATA[select distinct notice_id from notices where date_parution not like '0000-00-00']]></main>
			</query>
			<query for="CONTAINS_AT_LEAST" multipleWords="yes" regdiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (!!multiple_term!!)]]></main>
				<multipleTerm>year like '%!!p!!%'</multipleTerm>
				<multipleOperator>or</multipleOperator>
			</query>
			<query for="CONTAINS_ALL" multipleWords="yes" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (!!multiple_term!!)]]></main>
				<multipleTerm>year like '%!!p!!%'</multipleTerm>
				<multipleOperator>and</multipleOperator>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (year like '!!p!!%')]]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (year like '%!!p!!')]]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (year='!!p!!')]]></main>
			</query>
		</field>
		<field group="1" title="msg:searcher_coll" id="4">
			<input type="authoritie" ajax="collections" selector="collection" p1="p1" p2="p2"/>
			<variable name= "operator_between_multiple_authorities" type="input" comment="msg:operator_between_multiple_authorities">
				<default type="value">or</default>
				<input type="radio">
					<options>
						<label value="or">msg:operator_between_multiple_authorities_or</label>
						<label value="and">msg:operator_between_multiple_authorities_and</label>
					</options>
				</input>
			</variable>
			<query for="BOOLEAN" booleanSearch="yes">
				<main><![CDATA[select notice_id,!!pert_term!! as pert from notices, collections where (!!where_term!!) and (coll_id=collection_id) group by notice_id]]></main>
				<table>collections</table>
				<index_l>collection_name</index_l>
				<index_i>index_coll</index_i>
				<id_field>collection_id</id_field>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices, collections where (index_coll like ' !!p!!%') and (coll_id=collection_id)]]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices, collections where (collection_name like '%!!p!!') and (coll_id=collection_id)]]></main>
			</query>
			<query for="EXACT" regDiacrit="no">
				<main><![CDATA[select distinct notice_id from notices, collections where (collection_name like '!!p!!') and (coll_id=collection_id)]]></main>
			</query>
			<query for="AUTHORITY">
				<main><![CDATA[select distinct notice_id from notices, collections where collection_id=!!p!! and coll_id=collection_id]]></main>
			</query>
			<query for='ISEMPTY'>
				<main><![CDATA[select distinct notice_id from notices where coll_id = 0]]></main>
			</query>
			<query for='ISNOTEMPTY'>
				<main><![CDATA[select distinct notice_id from notices join collections on collection_id = coll_id]]></main>
			</query>
		</field>
		<field group="1" title="msg:253" id="96">
			<input type="text"/>
			<query for="STARTWITH">
				<main><![CDATA[select distinct notice_id from notices where nocoll like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH">
				<main><![CDATA[select distinct notice_id from notices where nocoll like '%!!p!!']]></main>
			</query>
			<query for="EXACT">
				<main><![CDATA[select distinct notice_id from notices where nocoll like '!!p!!']]></main>
			</query>
			<query for="ISEMPTY">
				<main><![CDATA[select distinct notice_id from notices where nocoll like '']]></main>
			</query>
			<query for="ISNOTEMPTY">
				<main><![CDATA[select distinct notice_id from notices where nocoll not like '']]></main>
			</query>
		</field>
		<field group="1" title="msg:searcher_subcoll" id="5">
			<input type="authoritie" ajax="subcollections" selector="subcollection" p1="p1" p2="p2"/>
			<variable name= "operator_between_multiple_authorities" type="input" comment="msg:operator_between_multiple_authorities">
				<default type="value">or</default>
				<input type="radio">
					<options>
						<label value="or">msg:operator_between_multiple_authorities_or</label>
						<label value="and">msg:operator_between_multiple_authorities_and</label>
					</options>
				</input>
			</variable>
			<query for="BOOLEAN" booleanSearch="yes">
				<main><![CDATA[select notice_id, !!pert_term!! as pert from notices, sub_collections where (!!where_term!!) and (subcoll_id=sub_coll_id) group by notice_id]]></main>
				<table>sub_collections</table>
				<index_l>sub_coll_name</index_l>
				<index_i>index_sub_coll</index_i>
				<id_field>sub_coll_id</id_field>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices, sub_collections where (index_sub_coll like ' !!p!!%') and (subcoll_id=sub_coll_id)]]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices, sub_collections where (sub_coll_name like '%!!p!!') and (subcoll_id=sub_coll_id)]]></main>
			</query>
			<query for="EXACT" regDiacrit="no">
				<main><![CDATA[select distinct notice_id from notices, sub_collections where (sub_coll_name like '!!p!!') and (subcoll_id=sub_coll_id)]]></main>
			</query>
			<query for="AUTHORITY">
				<main><![CDATA[select distinct notice_id from notices, sub_collections where subcoll_id=!!p!! and subcoll_id=sub_coll_id]]></main>
			</query>
			<query for='ISEMPTY'>
				<main><![CDATA[select distinct notice_id from notices where subcoll_id = 0]]></main>
			</query>
			<query for='ISNOTEMPTY'>
				<main><![CDATA[select distinct notice_id from notices join sub_collections on sub_coll_id = subcoll_id]]></main>
			</query>
		</field>
		<field group="1" title="msg:serie_query" id="6">
			<input type="authoritie" ajax="serie" selector="serie" p1="param1" p2="param2"/>
			<variable name= "operator_between_multiple_authorities" type="input" comment="msg:operator_between_multiple_authorities">
				<default type="value">or</default>
				<input type="radio">
					<options>
						<label value="or">msg:operator_between_multiple_authorities_or</label>
						<label value="and">msg:operator_between_multiple_authorities_and</label>
					</options>
				</input>
			</variable>
			<query for="BOOLEAN" booleanSearch="yes">
				<main><![CDATA[select notice_id, !!pert_term!! as pert from notices, series where (!!where_term!!) and (tparent_id=serie_id) group by notice_id]]></main>
				<table>series</table>
				<index_l>serie_name</index_l>
				<index_i>serie_index</index_i>
				<id_field>serie_id</id_field>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices, series where (serie_index like ' !!p!!%') and (tparent_id=serie_id)]]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices, series where (serie_index like '%!!p!! ') and (tparent_id=serie_id)]]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices, series where (serie_index=' !!p!! ') and (tparent_id=serie_id)]]></main>
			</query>
			<query for="AUTHORITY">
				<main><![CDATA[select distinct notice_id from notices, series where tparent_id='!!p!!' and tparent_id=serie_id]]></main>
			</query>
			<query for='ISEMPTY'>
				<main><![CDATA[select distinct notice_id from notices where tparent_id = 0]]></main>
			</query>
			<query for='ISNOTEMPTY'>
				<main><![CDATA[select distinct notice_id from notices join series on serie_id = tparent_id]]></main>
			</query>
		</field>
		<field group="1" title="msg:isbn_query" id="22">
			<input type="text"/>
			<query for="STARTWITH" isbnSearch="yes">
				<main><![CDATA[SELECT distinct notice_id from notices where !!multiple_term!!]]></main>
				<multipleTerm>code like '!!p!!%'</multipleTerm>
				<multipleOperator>or</multipleOperator>
			</query>
			<query for="ISEMPTY">
				<main><![CDATA[SELECT distinct notice_id from notices where code ='' or code is null]]></main>
			</query>
			<query for="ISNOTEMPTY">
				<main><![CDATA[SELECT distinct notice_id from notices where code!='' and code is not null]]></main>
			</query>
		</field>
		<field group="1" title="msg:titre_uniforme_search" id="51">
			<input type="authoritie" ajax="titre_uniforme" selector="titre_uniforme" p1="param1" p2="param2"/>
			<variable name= "operator_between_multiple_authorities" type="input" comment="msg:operator_between_multiple_authorities">
				<default type="value">or</default>
				<input type="radio">
					<options>
						<label value="or">msg:operator_between_multiple_authorities_or</label>
						<label value="and">msg:operator_between_multiple_authorities_and</label>
					</options>
				</input>
			</variable>
			<query for="BOOLEAN" booleanSearch="yes">
				<main><![CDATA[select ntu_num_notice as notice_id, !!pert_term!! as pert from notices_titres_uniformes, titres_uniformes where (!!where_term!!) and ntu_num_tu=tu_id group by notice_id]]></main>
				<table>titres_uniformes</table>
				<index_l>tu_name</index_l>
				<index_i>index_tu</index_i>
				<id_field>tu_id</id_field>
				<keep_empty_words>yes</keep_empty_words>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[select distinct ntu_num_notice as notice_id from  notices_titres_uniformes, titres_uniformes where tu_name like '!!p!!%' and ntu_num_tu=tu_id]]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[select distinct ntu_num_notice as notice_id from  notices_titres_uniformes, titres_uniformes where tu_name like '%!!p!!' and ntu_num_tu=tu_id]]></main>
			</query>
			<query for="EXACT" regDiacrit="no">
				<main><![CDATA[select distinct ntu_num_notice as notice_id from  notices_titres_uniformes, titres_uniformes where tu_name like '!!p!!' and ntu_num_tu=tu_id]]></main>
			</query>
			<query for="AUTHORITY">
				<main><![CDATA[select distinct ntu_num_notice as notice_id from  notices_titres_uniformes, titres_uniformes where ntu_num_tu='!!p!!' and ntu_num_tu=tu_id]]></main>
			</query>
			<query for='ISEMPTY'>
				<main><![CDATA[select distinct notice_id from notices left join notices_titres_uniformes on notice_id = ntu_num_notice where ntu_num_notice is null]]></main>
			</query>
			<query for='ISNOTEMPTY'>
				<main><![CDATA[select distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on ntu_num_tu=tu_id]]></main>
			</query>
		</field>	
		<field group="1" title="msg:docnum_indexation_contenu" id="52">
			<input type="text"/>
			<query for="BOOLEAN" booleanSearch="yes">
				<main><![CDATA[select distinct uni.notice_id, pert from (
				select notice_id, !!pert_term!! as pert from notices, explnum 
				where (!!where_term!!) and explnum_notice=notice_id
				UNION
				select notice_id, !!pert_term!! as pert from notices, explnum, bulletins
				where (!!where_term!!) and (explnum_bulletin=bulletin_id and bulletin_notice=notice_id)
				) as uni join notices n on uni.notice_id=n.notice_id 
				]]></main>
				<table>explnum</table>
				<index_l>explnum_index_wew</index_l>
				<index_i>explnum_index_sew</index_i>
				<id_field>explnum_notice</id_field>
				<fulltext>yes</fulltext>
			</query>
		</field>
		<field group="1" title="msg:external_source" id="105">
			<input type="query_list">
				<query>select source_id, name from connectors_sources order by name</query>
			</input>
			<query for="EQ">
				<main><![CDATA[select distinct notice_id from notices join notices_externes on notices_externes.num_notice = notices.notice_id join external_count on external_count.recid = notices_externes.recid where external_count.source_id=!!p!!]]></main>
			</query>
		</field>
		<field group="2" title="msg:265" id="7">
			<input type="text"/>
			<query for="BOOLEAN" booleanSearch="yes">
				<main><![CDATA[select notice_id, !!pert_term!! as pert from notices where !!where_term!! group by notice_id]]></main>
				<table>notices</table>
				<index_l>n_gen</index_l>
				<index_i>index_n_gen</index_i>
				<id_field>notice_id</id_field>
			</query>
			<query for="STARTWITH" regDiacrit="yes" Keep_EmptyWord="yes">
				<main><![CDATA[select distinct notice_id from notices where (n_gen like '!!p!!%')]]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes" Keep_EmptyWord="yes">
				<main><![CDATA[select distinct notice_id from notices where (n_gen like '%!!p!!')]]></main>
			</query>
			<query for="EXACT" regDiacrit="yes" Keep_EmptyWord="yes">
				<main><![CDATA[select distinct notice_id from notices where (n_gen like '!!p!!')]]></main>
			</query>
			<query for="ISEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where n_gen like '']]></main>
			</query>
			<query for="ISNOTEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where n_gen not like '']]></main>
			</query>
		</field>
		<field group="2" title="msg:266" id="8">
			<input type="text"/>
			<query for="BOOLEAN" booleanSearch="yes">
				<main><![CDATA[select notice_id, !!pert_term!! as pert from notices where !!where_term!! group by notice_id]]></main>
				<table>notices</table>
				<index_l>n_contenu</index_l>
				<index_i>index_n_contenu</index_i>
				<id_field>notice_id</id_field>
			</query>
			<query for="STARTWITH" regDiacrit="yes" Keep_EmptyWord="yes">
				<main><![CDATA[select distinct notice_id from notices where (n_contenu like '!!p!!%')]]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes" Keep_EmptyWord="yes">
				<main><![CDATA[select distinct notice_id from notices where (n_contenu like '%!!p!!')]]></main>
			</query>
			<query for="EXACT" regDiacrit="yes" Keep_EmptyWord="yes">
				<main><![CDATA[select distinct notice_id from notices where (n_contenu like '!!p!!')]]></main>
			</query>
			<query for="ISEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where n_contenu like '']]></main>
			</query>
			<query for="ISNOTEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where n_contenu not like '']]></main>
			</query>
		</field>
		<field group="2" title="msg:note_resume_query" id="9">
			<input type="text"/>
			<query for="BOOLEAN" booleanSearch="yes">
				<main><![CDATA[select notice_id, !!pert_term!! as pert from notices where !!where_term!! group by notice_id]]></main>
				<table>notices</table>
				<index_l>n_resume</index_l>
				<index_i>index_n_resume</index_i>
				<id_field>notice_id</id_field>
			</query>
			<query for="STARTWITH" regDiacrit="yes" Keep_EmptyWord="yes">
				<main><![CDATA[select distinct notice_id from notices where (n_resume like '!!p!!%')]]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes" Keep_EmptyWord="yes">
				<main><![CDATA[select distinct notice_id from notices where (n_resume like '%!!p!!')]]></main>
			</query>
			<query for="EXACT" regDiacrit="yes" Keep_EmptyWord="yes">
				<main><![CDATA[select distinct notice_id from notices where (n_resume like '!!p!!')]]></main>
			</query>
			<query for="ISEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where n_resume like '']]></main>
			</query>
			<query for="ISNOTEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where n_resume not like '']]></main>
			</query>
		</field>
		<field group="2" title="msg:toutes_notes_query" id="10">
			<input type="text"/>
			<query for="BOOLEAN" booleanSearch="yes">
				<main><![CDATA[select notice_id, !!pert_term!! as pert from notices where !!where_term!! group by notice_id]]></main>
				<table>notices</table>
				<index_l>concat(n_gen,' ',n_contenu,' ',n_resume)</index_l>
				<index_i>concat(index_n_gen,index_n_contenu,index_n_resume)</index_i>
				<id_field>notice_id</id_field>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (concat(index_n_gen,index_n_contenu,index_n_resume) like ' !!p!!%')]]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (concat(index_n_gen,index_n_contenu,index_n_resume) like '%!!p!! ')]]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (concat(index_n_gen,index_n_contenu,index_n_resume) like ' !!p!! ')]]></main>
			</query>
			<query for="ISEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where concat(index_n_gen,index_n_contenu,index_n_resume) like '']]></main>
			</query>
			<query for="ISNOTEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where concat(index_n_gen,index_n_contenu,index_n_resume) not like '']]></main>
			</query>
		</field>
		<field group="3" title="msg:134" id="11">
			<input type="authoritie" ajax="categories_mul" selector="categorie" p1="p1" p2="p2"/>
			<variable name="lang" type="global"/>
			<variable name="opac_thesaurus_defaut" type="global"/>
			<variable name="id_thesaurus" type="input" comment="Thésaurus">
				<var name="thesaurus_mode_pmb" visibility="yes">
					<value visibility="no">0</value>
				</var>
				<default type="var">opac_thesaurus_defaut</default>
				<input type="query_list">
					<query allChoice="yes" titleAllChoice="msg:thes_all">select id_thesaurus, libelle_thesaurus from thesaurus order by libelle_thesaurus</query>
				</input>
			</variable>
			<variable name= "operator_between_multiple_authorities" type="input" comment="msg:operator_between_multiple_authorities">
				<default type="value">or</default>
				<input type="radio">
					<options>
						<label value="or">msg:operator_between_multiple_authorities_or</label>
						<label value="and">msg:operator_between_multiple_authorities_and</label>
					</options>
				</input>
			</variable>
			<variable name="langue_defaut" type="calculated">
				<calc type="value_from_query">
					<query>select group_concat(langue_defaut SEPARATOR "','") as langue_defaut, 1 from thesaurus where id_thesaurus in (!!id_thesaurus!!) group by 2</query>
				</calc>
			</variable>
			<query for="BOOLEAN" multiple="yes">
				<part>
					<main>drop table if exists catdef</main>
				</part>
				<part>
					<main>create temporary table catdef as select num_noeud,libelle_categorie,index_categorie from noeuds, categories where categories.langue in ('!!langue_defaut!!') and noeuds.num_thesaurus in (!!id_thesaurus!!) and noeuds.id_noeud = categories.num_noeud</main>
				</part>
				<part>
					<main>alter table catdef add key (num_noeud)</main>
				</part>
				<part>
					<main>drop table if exists catlg</main>
				</part>
				<part>
					<main>create temporary table catlg as select num_noeud,libelle_categorie, index_categorie from noeuds, categories where categories.langue in ('!!lang!!') and noeuds.num_thesaurus  in (!!id_thesaurus!!) and noeuds.id_noeud = categories.num_noeud</main>
				</part>
				<part>
					<main>alter table catlg add key (num_noeud)</main>
				</part>
				<part booleanSearch="yes">
					<main>select notcateg_notice as notice_id,if(catlg.num_noeud is null, !!pert_term_2!!, !!pert_term_1!!) as pert from catdef left join catlg on catdef.num_noeud = catlg.num_noeud, notices_categories where notices_categories.num_noeud=catdef.num_noeud and ((!!where_term_1!!) or (catlg.num_noeud is null and !!where_term_2!!)) group by notice_id </main>
					<boolean>
						<table>catlg.categories</table>
						<index_l>catlg.libelle_categorie</index_l>
						<index_i>catlg.index_categorie</index_i>
						<id_field>catlg.num_noeud</id_field>
					</boolean>
					<boolean>
						<table>catdef.categories</table>
						<index_l>catdef.libelle_categorie</index_l>
						<index_i>catdef.index_categorie</index_i>
						<id_field>catdef.num_noeud</id_field>
					</boolean>
				</part>
			</query>
			<query for="STARTWITH" multiple="yes">
				<part>
					<main>drop table if exists catdef</main>
				</part>
				<part>
					<main>create temporary table catdef as select num_noeud,libelle_categorie,index_categorie from noeuds, categories where categories.langue in ('!!langue_defaut!!') and noeuds.num_thesaurus in (!!id_thesaurus!!) and noeuds.id_noeud = categories.num_noeud</main>
				</part>
				<part>
					<main>alter table catdef add key (num_noeud)</main>
				</part>
				<part>
					<main>drop table if exists catlg</main>
				</part>
				<part>
					<main>create temporary table catlg as select num_noeud,libelle_categorie, index_categorie from noeuds, categories where categories.langue in ('!!lang!!') and noeuds.num_thesaurus in (!!id_thesaurus!!) and noeuds.id_noeud = categories.num_noeud</main>
				</part>
				<part>
					<main>alter table catlg add key (num_noeud)</main>
				</part>
				<part>
					<main>select notcateg_notice as notice_id from catdef left join catlg on catdef.num_noeud = catlg.num_noeud, notices_categories where notices_categories.num_noeud=catdef.num_noeud and ((catlg.libelle_categorie like '!!p!!%') or (catlg.num_noeud is null and catdef.libelle_categorie like '!!p!!%')) group by notice_id</main>
				</part>
			</query>
			<query for="ENDWITH" multiple="yes">
				<part>
					<main>drop table if exists catdef</main>
				</part>
				<part>
					<main>create temporary table catdef as select num_noeud,libelle_categorie,index_categorie from noeuds, categories where categories.langue in ('!!langue_defaut!!') and noeuds.num_thesaurus in (!!id_thesaurus!!) and noeuds.id_noeud = categories.num_noeud</main>
				</part>
				<part>
					<main>alter table catdef add key (num_noeud)</main>
				</part>
				<part>
					<main>drop table if exists catlg</main>
				</part>
				<part>
					<main>create temporary table catlg as select num_noeud,libelle_categorie, index_categorie from noeuds, categories where categories.langue in ('!!lang!!') and noeuds.num_thesaurus in (!!id_thesaurus!!) and noeuds.id_noeud = categories.num_noeud</main>
				</part>
				<part>
					<main>alter table catlg add key (num_noeud)</main>
				</part>
				<part>
					<main>select notcateg_notice as notice_id from catdef left join catlg on catdef.num_noeud = catlg.num_noeud, notices_categories where notices_categories.num_noeud=catdef.num_noeud and ((catlg.libelle_categorie like '%!!p!!') or (catlg.num_noeud is null and catdef.libelle_categorie like '%!!p!!')) group by notice_id</main>
				</part>
			</query>
			<query for="EXACT" multiple="yes">
				<part>
					<main>drop table if exists catdef</main>
				</part>
				<part>
					<main>create temporary table catdef as select num_noeud,libelle_categorie,index_categorie from noeuds, categories where categories.langue in ('!!langue_defaut!!') and noeuds.num_thesaurus in (!!id_thesaurus!!) and noeuds.id_noeud = categories.num_noeud</main>
				</part>
				<part>
					<main>alter table catdef add key (num_noeud)</main>
				</part>
				<part>
					<main>drop table if exists catlg</main>
				</part>
				<part>
					<main>create temporary table catlg as select num_noeud,libelle_categorie, index_categorie from noeuds, categories where categories.langue in ('!!lang!!') and noeuds.num_thesaurus in (!!id_thesaurus!!) and noeuds.id_noeud = categories.num_noeud</main>
				</part>
				<part>
					<main>alter table catlg add key (num_noeud)</main>
				</part>
				<part>
					<main>select notcateg_notice as notice_id from catdef left join catlg on catdef.num_noeud = catlg.num_noeud, notices_categories where notices_categories.num_noeud=catdef.num_noeud and ((catlg.libelle_categorie='!!p!!') or (catlg.num_noeud is null and catdef.libelle_categorie='!!p!!')) group by notice_id</main>
				</part>
			</query>
			<query for="AUTHORITY">
				<main><![CDATA[select distinct notice_id from notices_categories join notices on notcateg_notice = notice_id where notices_categories.num_noeud = !!p!!]]></main>
			</query>
			<query for="ISEMPTY">
				<main><![CDATA[select distinct notice_id from notices where notice_id not in(select distinct notice_id from notices join notices_categories on notcateg_notice = notice_id join noeuds on notices_categories.num_noeud=noeuds.id_noeud AND num_thesaurus in (!!id_thesaurus!!)) order by index_sew]]></main>
			</query>
			<query for="ISNOTEMPTY">
				<main><![CDATA[select distinct notice_id from notices join notices_categories on notcateg_notice = notice_id join noeuds on notices_categories.num_noeud=noeuds.id_noeud AND num_thesaurus in (!!id_thesaurus!!) order by index_sew]]></main>
			</query>
		</field>		
		<field group="3" title="msg:search_autopostage_multicritere" id="54">
			<var name="thesaurus_auto_postage_search" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="authoritie" ajax="categories_mul" selector="categorie" p1="p1" p2="p2"/>
			<variable name= "operator_between_multiple_authorities" type="input" comment="msg:operator_between_multiple_authorities">
				<default type="value">or</default>
				<input type="radio">
					<options>
						<label value="or">msg:operator_between_multiple_authorities_or</label>
						<label value="and">msg:operator_between_multiple_authorities_and</label>
					</options>
				</input>
			</variable>
			<variable name="lang" type="global"/>
			<variable name="opac_thesaurus_defaut" type="global"/>
			<variable name="id_thesaurus" type="input" comment="Thésaurus">
				<var name="thesaurus_mode_pmb" visibility="yes">
					<value visibility="no">0</value>
				</var>
				<default type="var">opac_thesaurus_defaut</default>
				<input type="query_list">
					<query allChoice="yes" titleAllChoice="msg:thes_all">select id_thesaurus, libelle_thesaurus from thesaurus order by libelle_thesaurus</query>
				</input>
			</variable>
			<variable name="langue_defaut" type="calculated">
				<calc type="value_from_query">
					<query>select group_concat(langue_defaut SEPARATOR "','") as langue_defaut, 1 from thesaurus where id_thesaurus in (!!id_thesaurus!!) group by 2</query>
				</calc>
			</variable>
			<!-- variables pour la recherche autorité... -->
			<variable name="limit_montant" type="calculated">
				<calc type="value_from_query">
					<query>select case valeur_param when '0' then '{0,0}' when '*' then '*' else concat('{0,',valeur_param,'}') end  as limit_montant from parametres where sstype_param='auto_postage_search_nb_montant' and type_param='thesaurus'</query>
				</calc>			
			</variable>
			<variable name="limit_descendant" type="calculated">
				<calc type="value_from_query">
					<query>select case valeur_param when '0' then '{0,0}' when '*' then '*' else concat('{0,',valeur_param,'}') end  as limit_montant from parametres where sstype_param='auto_postage_search_nb_descendant' and type_param='thesaurus'</query>
				</calc>			
			</variable>
			<query for="BOOLEAN" multiple="yes">
				<part>
					<main>drop table if exists catdef</main>
				</part>
				<part>
					<main>create temporary table catdef as select num_noeud,path_word_categ,index_path_word_categ from noeuds, categories where categories.langue in ('!!langue_defaut!!') and noeuds.num_thesaurus in (!!id_thesaurus!!) and noeuds.id_noeud = categories.num_noeud</main>
				</part>
				<part>
					<main>alter table catdef add key (num_noeud)</main>
				</part>
				<part>
					<main>drop table if exists catlg</main>
				</part>
				<part>
					<main>create temporary table catlg as select num_noeud,path_word_categ, index_path_word_categ from noeuds, categories where categories.langue in ('!!lang!!') and noeuds.num_thesaurus  in (!!id_thesaurus!!) and noeuds.id_noeud = categories.num_noeud</main>
				</part>
				<part>
					<main>alter table catlg add key (num_noeud)</main>
				</part>
				<part booleanSearch="yes">
					<main>select notcateg_notice as notice_id,if(catlg.num_noeud is null, !!pert_term_2!!, !!pert_term_1!!) as pert from catdef left join catlg on catdef.num_noeud = catlg.num_noeud, notices_categories where notices_categories.num_noeud=catdef.num_noeud and ((!!where_term_1!!) or (catlg.num_noeud is null and !!where_term_2!!)) group by notice_id</main>
					<boolean>
						<table>catlg.categories</table>
						<index_l>catlg.path_word_categ</index_l>
						<index_i>catlg.index_path_word_categ</index_i>
						<id_field>catlg.num_noeud</id_field>
					</boolean>
					<boolean>
						<table>catdef.categories</table>
						<index_l>catdef.path_word_categ</index_l>
						<index_i>catdef.index_path_word_categ</index_i>
						<id_field>catdef.num_noeud</id_field>
					</boolean>
				</part>
			</query>
			<query for="AUTHORITY" multiple="yes">
				<part>
					<main>drop table if exists catdef</main>
				</part>	
				<part>
					<main>create temporary table catdef as select uni.* from (select n.id_noeud,n.path from noeuds as n join noeuds as term on n.path like concat(term.path,'%') where n.path regexp concat('^',term.path,'(\/[0-9]+)!!limit_descendant!!$') and term.id_noeud = !!p!! union select n.id_noeud,n.path from noeuds as n join noeuds as term on term.path like concat(n.path,'%') where n.path != 0 and term.path regexp concat('^',n.path,'(\/[0-9]+)!!limit_montant!!$') and term.id_noeud = !!p!!)as uni</main>
				</part>		
				<part>
					<main>select distinct notcateg_notice as notice_id from catdef join notices_categories on catdef.id_noeud = notices_categories.num_noeud</main>
				</part>	
			</query>
		</field>
		<field group="3" title="msg:ontology_skos_concept" id="1000">
			<var name="thesaurus_concepts_active" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="authoritie" ajax="onto" selector="ontology" p1="param1" p2="param2" />
			<variable name="deflt_concept_scheme" type="global"/>
			<variable name="id_scheme" type="input" comment="Schéma">
				<default type="var">deflt_concept_scheme</default>
				<input type="query_list">
					<query allChoice="yes" titleAllChoice="msg:thes_all">select 0 as id, 'Sans schéma' as lib union SELECT id_item as id, value as lib FROM skos_fields_global_index WHERE code_champ=100 group by 1 order by 2</query>
				</input>
			</variable>
			<variable name= "operator_between_multiple_authorities" type="input" comment="msg:operator_between_multiple_authorities">
				<default type="value">or</default>
				<input type="radio">
					<options>
						<label value="or">msg:operator_between_multiple_authorities_or</label>
						<label value="and">msg:operator_between_multiple_authorities_and</label>
					</options>
				</input>
			</variable>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="concepts"></class>
			</query>
			<query for="STARTWITH">
				<main><![CDATA[select distinct num_object as notice_id from index_concept join skos_fields_global_index on num_concept = id_item and code_champ = 1 where type_object = 1 and value like '!!p!!%' and if(0 in (!!id_scheme!!), 1, id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!)))]]></main>
			</query>
			<query for="ENDWITH">
				<main><![CDATA[select distinct num_object as notice_id from index_concept join skos_fields_global_index on num_concept = id_item and code_champ = 1 where type_object = 1 and value like '%!!p!!' and if(0 in (!!id_scheme!!), 1, id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!)))]]></main>
			</query>
			<query for="EXACT">
				<main><![CDATA[select distinct num_object as notice_id from index_concept join skos_fields_global_index on num_concept = id_item and code_champ = 1 where type_object = 1 and value like '!!p!!' and if(0 in (!!id_scheme!!), 1, id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!)))]]></main>
			</query>
			<query for="AUTHORITY">
				<main><![CDATA[select distinct num_object as notice_id from index_concept where type_object = 1 and num_concept = !!p!!]]></main>
			</query>
			<query for="ISEMPTY">
				<main><![CDATA[select distinct notice_id from notices where notice_id not in (select distinct num_object as notice_id from index_concept join skos_fields_global_index on num_concept = id_item and code_champ = 1 where type_object = 1 and if(0 in (!!id_scheme!!), 1, id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!))))]]></main>
			</query>
			<query for="ISNOTEMPTY">
				<main><![CDATA[select distinct num_object as notice_id from index_concept join skos_fields_global_index on num_concept = id_item and code_champ = 1 where type_object = 1 and id_item in (select id_item from skos_fields_global_index where code_champ = 4 and if(0 in (!!id_scheme!!), 1, authority_num IN (!!id_scheme!!)))]]></main>
			</query>
		</field>
		<field group="3" title="msg:ontology_explnum_skos_concept" id="1001">
			<var name="thesaurus_concepts_active" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="authoritie" ajax="onto" selector="ontology" p1="param1" p2="param2" />
			<variable name="deflt_concept_scheme" type="global"/>
			<variable name="id_scheme" type="input" comment="Schéma">
				<default type="var">deflt_concept_scheme</default>
				<input type="query_list">
					<query allChoice="yes" titleAllChoice="msg:thes_all">select 0 as id, 'Sans schéma' as lib union SELECT id_item as id, value as lib FROM skos_fields_global_index WHERE code_champ=100 group by 1 order by 2</query>
				</input>
			</variable>
			<variable name= "operator_between_multiple_authorities" type="input" comment="msg:operator_between_multiple_authorities">
				<default type="value">or</default>
				<input type="radio">
					<options>
						<label value="or">msg:operator_between_multiple_authorities_or</label>
						<label value="and">msg:operator_between_multiple_authorities_and</label>
					</options>
				</input>
			</variable>
			<query for="STARTWITH">
				<main><![CDATA[select distinct explnum_notice as notice_id from explnum join index_concept on index_concept.num_object = explnum.explnum_id and index_concept.type_object = 11 join skos_fields_global_index on num_concept = id_item and code_champ = 1 where explnum_notice <> 0 and value like '!!p!!%' and if(0 in (!!id_scheme!!), 1, id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!)))]]></main>
			</query>
			<query for="ENDWITH">
				<main><![CDATA[select distinct explnum_notice as notice_id from explnum join index_concept on index_concept.num_object = explnum.explnum_id and index_concept.type_object = 11 join skos_fields_global_index on num_concept = id_item and code_champ = 1 where explnum_notice <> 0 and value like '%!!p!!' and if(0 in (!!id_scheme!!), 1, id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!)))]]></main>
			</query>
			<query for="EXACT">
				<main><![CDATA[select distinct explnum_notice as notice_id from explnum join index_concept on index_concept.num_object = explnum.explnum_id and index_concept.type_object = 11 join skos_fields_global_index on num_concept = id_item and code_champ = 1 where explnum_notice <> 0 and value like '!!p!!' and if(0 in (!!id_scheme!!), 1, id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!)))]]></main>
			</query>
			<query for="AUTHORITY">
				<main><![CDATA[select distinct explnum_notice as notice_id from explnum join index_concept on index_concept.num_object = explnum.explnum_id and index_concept.type_object = 11 where explnum_notice <> 0 and num_concept = !!p!!]]></main>
			</query>
		</field>
		<field group="3" title="msg:search_concepts_autopostage_multicritere" id="1003">
			<var name="thesaurus_concepts_autopostage" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="authoritie" ajax="onto" selector="ontology" p1="param1" p2="param2" />
			<variable name="deflt_concept_scheme" type="global"/>
			<variable name="id_scheme" type="input" comment="Schéma">
				<default type="var">deflt_concept_scheme</default>
				<input type="query_list">
					<query allChoice="yes" titleAllChoice="msg:thes_all">select -1 as id, 'Sans schéma' as lib union SELECT id_item as id, value as lib FROM skos_fields_global_index WHERE code_champ=100 group by 1 order by 2</query>
				</input>
			</variable>
			<variable name= "operator_between_multiple_authorities" type="input" comment="msg:operator_between_multiple_authorities">
				<default type="value">or</default>
				<input type="radio">
					<options>
						<label value="or">msg:operator_between_multiple_authorities_or</label>
						<label value="and">msg:operator_between_multiple_authorities_and</label>
					</options>
				</input>
			</variable>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="concepts">
					<fieldrestrict>
						<field>code_champ</field>
						<values>129</values>
						<op>or</op>
					</fieldrestrict>
				</class>
			</query>
			<query for="AUTHORITY">
				<main><![CDATA[ SELECT DISTINCT num_object AS notice_id FROM index_concept WHERE type_object = 1 AND num_concept = !!p!! 
				UNION SELECT DISTINCT num_object AS notice_id FROM index_concept JOIN skos_fields_global_index ON authority_num = num_concept WHERE type_object = 1 AND code_champ IN (5,6) AND id_item = !!p!!]]></main>
			</query>
		</field>		     
		<field group="3" title="msg:map_emprise" id="1004">
			<var name="pmb_map_activate" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="map"/>
			<query for="CONTAINS">
				<main>select distinct num_object as notice_id from index_concept left join map_emprises on map_emprise_type = 10 and contains(geomfromtext('!!p!!'),map_emprise_data) = 1 where type_object = 1 and map_emprise_obj_num = num_concept</main>
			</query>
			<query for="AERASUP">
				<main>select distinct num_object as notice_id from index_concept left join map_emprises on map_emprise_type = 10 and Area((map_emprise_data)) &gt; Area(geomfromtext('!!p!!')) where type_object = 1 and map_emprise_obj_num = num_concept</main>
			</query>
			<query for="AERAINF">
				<main>select distinct num_object as notice_id from index_concept left join map_emprises on map_emprise_type = 10 and Area((map_emprise_data)) &lt; Area(geomfromtext('!!p!!')) where type_object = 1 and map_emprise_obj_num = num_concept</main>
			</query>
			<query for="INTERSECTS">
				<main>select distinct num_object as notice_id from index_concept left join map_emprises on map_emprise_type = 10 and intersects(geomfromtext('!!p!!'),map_emprise_data) = 1 where type_object = 1 and map_emprise_obj_num = num_concept</main>
			</query>
			<query for="ISEMPTY">
				<main>select distinct num_object as notice_id from index_concept where type_object = 1 and num_concept not in (select distinct map_emprise_obj_num from map_emprises where map_emprise_type=10)</main>
			</query>
			<query for="ISNOTEMPTY">
				<main>select distinct num_object as notice_id from index_concept where type_object = 1 and num_concept in (select distinct map_emprise_obj_num from map_emprises where map_emprise_type=10)</main>
			</query>
		</field>
		<field group="3" title="msg:indexint_menu_title" id="12">
			<input type="authoritie" ajax="indexint_mul" selector="indexint" p1="param1" p2="param2"/>
			<variable name= "operator_between_multiple_authorities" type="input" comment="msg:operator_between_multiple_authorities">
				<default type="value">or</default>
				<input type="radio">
					<options>
						<label value="or">msg:operator_between_multiple_authorities_or</label>
						<label value="and">msg:operator_between_multiple_authorities_and</label>
					</options>
				</input>
			</variable>
			<query for="BOOLEAN" booleanSearch="yes">
				<main><![CDATA[select notice_id, !!pert_term!! as pert from notices, indexint where (!!where_term!!) and (indexint=indexint_id) group by notice_id]]></main>
				<table>indexint</table>
				<index_l>concat(indexint_name,' ',indexint_comment)</index_l>
				<index_i>index_indexint</index_i>
				<id_field>indexint_id</id_field>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices, indexint where (index_indexint like ' !!p!!%') and (indexint=indexint_id)]]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices, indexint where (index_indexint like '%!!p!! ') and (indexint=indexint_id)]]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices, indexint where ((index_indexint=' !!p!! ') or (indexint_name='!!p!!')) and (indexint=indexint_id)]]></main>
			</query>
			<query for="AUTHORITY">
				<main><![CDATA[select distinct notice_id from notices, indexint where (indexint='!!p!!') and (indexint=indexint_id)]]></main>
			</query>
			<query for="ISEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where indexint=0]]></main>
			</query>
			<query for="ISNOTEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where indexint!=0]]></main>
			</query>
		</field>
		<field group="3" title="msg:324" id="13">
			<input type="text"/>
			<query for="BOOLEAN" booleanSearch="yes">
				<main><![CDATA[select notice_id, !!pert_term!! as pert from notices where !!where_term!! group by notice_id]]></main>
				<table>notices</table>
				<index_l>index_l</index_l>
				<index_i>index_matieres</index_i>
				<id_field>notice_id</id_field>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (index_l like '!!p!!%')]]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (index_l like '%!!p!!')]]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (index_l like '!!p!!')]]></main>
			</query>
			<query for="ISEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (index_l like '')]]></main>
			</query>
			<query for="ISNOTEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (index_l not like '')]]></main>
			</query>
		</field>
		<field group="4" title="msg:langue_publication_query" id="20">
			<input type="marc_list">
				<name>lang</name>
				<restrictquery>SELECT group_concat(distinct code_langue SEPARATOR ',') as all_languages from notices_langues where type_langue=0</restrictquery>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id from notices, notices_langues where code_langue='!!p!!' and type_langue=0 and notice_id=num_notice]]></main>
			</query>
			<query for="ISEMPTY">
				<main><![CDATA[select distinct notice_id from notices left join notices_langues on type_langue=0 and num_notice = notice_id where code_langue is null]]></main>
			</query>
			<query for="ISNOTEMPTY">
				<main><![CDATA[select distinct notice_id from notices join notices_langues on type_langue=0 and num_notice = notice_id]]></main>
			</query>
 
		</field>
		<field group="4" title="msg:langue_originale_query" id="21">
			<input type="marc_list">
				<name>lang</name>
				<restrictquery>SELECT group_concat(distinct code_langue SEPARATOR ',') as all_languages from notices_langues where type_langue=1</restrictquery>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id from notices, notices_langues where code_langue='!!p!!' and type_langue=1 and notice_id=num_notice]]></main>
			</query>
	 		<query for="ISEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices left join notices_langues on type_langue=1 and num_notice = notice_id where code_langue is null]]></main>
			</query>
			<query for="ISNOTEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices join notices_langues on type_langue=1 and num_notice = notice_id]]></main>
			</query>
		</field>
		<field group="5" title="msg:doc_perio_art_query" id="14">
			<input type="list">
				<options>
					<option value="m">msg:4057</option>
					<option value="s">msg:4010</option>
					<option value="b">msg:bulletin_query</option>
					<option value="a">msg:articles_query</option>
				</options>	
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id from notices where niveau_biblio='!!p!!']]></main>
			</query>
		</field>
		<field group="5" title="msg:type_doc_sort" id="15">
			<input type="marc_list">
				<name>doctype</name>
				<restrictquery>SELECT group_concat(distinct typdoc SEPARATOR ',') as all_typdoc from notices</restrictquery>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id from notices where typdoc='!!p!!']]></main>
			</query>
		</field>
		<field group="5" title="msg:origine_notice_query" id="36">
			<input type="query_list">
				<query>select orinot_id, orinot_nom from origine_notice</query>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id from notices where origine_catalogage='!!p!!']]></main>
			</query>
		</field>
		<field group="5" title="msg:statut_notice_sort" id="31">
			<input type="query_list">
				<query>select id_notice_statut, gestion_libelle from notice_statut</query>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id from notices where statut='!!p!!']]></main>
			</query>
		</field>
		<field group="5" title="msg:comment_gestion_query" id="33">
			<input type='text'/>
			<query for="STARTWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from notices where commentaire_gestion like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from notices where commentaire_gestion like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from notices where commentaire_gestion like '!!p!!']]></main>
			</query>
			<query for="CONTAINS" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from notices where commentaire_gestion like '%!!p!!%']]></main>
			</query>
			<query for="CONTAINS_AT_LEAST" multipleWords="yes" regDiacrit="yes">
				<main><![CDATA[SELECT distinct notice_id from notices where !!multiple_term!!]]></main>
				<multipleTerm>commentaire_gestion like '%!!p!!%'</multipleTerm>
				<multipleOperator>or</multipleOperator>
			</query>
			<query for="CONTAINS_ALL" multipleWords="yes" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from notices where !!multiple_term!!]]></main>
				<multipleTerm>commentaire_gestion like '%!!p!!%'</multipleTerm>
				<multipleOperator>and</multipleOperator>
			</query>
			<query for="ISEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (commentaire_gestion like '')]]></main>
			</query>
			<query for="ISNOTEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (commentaire_gestion not like '')]]></main>
			</query>
		</field>
		<field group="5" title="msg:date_creation_query" id="41">
			<input type='date' placeholder='msg:format_date_input_placeholder'/>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id from notices where create_date>='!!p!!' and create_date<='!!p!! 23:59:59']]></main>
			</query>
			<query for="LT">
				<main><![CDATA[SELECT distinct notice_id from notices where create_date<'!!p!!']]></main>
			</query>
			<query for="GT">
				<main><![CDATA[SELECT distinct notice_id from notices where create_date>'!!p!! 23:59:59']]></main>
			</query>
			<query for="LTEQ">
				<main><![CDATA[SELECT distinct notice_id from notices where create_date<='!!p!! 23:59:59']]></main>
			</query>
			<query for="GTEQ">
				<main><![CDATA[SELECT distinct notice_id from notices where create_date>='!!p!!']]></main>
			</query>
			<query for="BETWEEN" notAllowedFor="list,query_list,marclist,query_auth">
				<main><![CDATA[SELECT distinct notice_id from notices where 
				if('!!p!!', create_date>='!!p!!', 1) and if('!!p1!!', create_date<='!!p1!! 23:59:59', 1)]]></main>
			</query>
			<query for="LESS_THAN_DAYS">
				<main><![CDATA[SELECT distinct notice_id from notices where create_date > DATE_SUB(NOW(), INTERVAL !!p!! DAY)]]></main>
			</query>
			<query for="MORE_THAN_DAYS">
				<main><![CDATA[SELECT distinct notice_id from notices where create_date < DATE_SUB(NOW(), INTERVAL !!p!! DAY)]]></main>
			</query>
			<query for="THIS_WEEK">
				<main><![CDATA[SELECT distinct notice_id from notices where WEEK(create_date,1) = WEEK(NOW()) AND YEAR(create_date) = YEAR(NOW())]]></main>
			</query>
			<query for="THIS_MONTH">
				<main><![CDATA[SELECT distinct notice_id from notices where MONTH(create_date) = MONTH(NOW()) AND YEAR(create_date) = YEAR(NOW())]]></main>
			</query>
			<query for="LAST_MONTH">
				<main><![CDATA[SELECT distinct notice_id from notices where PERIOD_DIFF(DATE_FORMAT(NOW(), '%Y%m'), DATE_FORMAT(create_date, '%Y%m')) = 1]]></main>
			</query>
			<query for="THIS_YEAR">
				<main><![CDATA[SELECT distinct notice_id from notices where YEAR(create_date) = YEAR(NOW())]]></main>
			</query>		
		</field>
		<field group="5" title="msg:date_update_query" id="67">
			<input type='date' placeholder='msg:format_date_input_placeholder'/>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id from notices where update_date>='!!p!!' and update_date<='!!p!! 23:59:59']]></main>
			</query>
			<query for="LT">
				<main><![CDATA[SELECT distinct notice_id from notices where update_date<'!!p!!']]></main>
			</query>
			<query for="GT">
				<main><![CDATA[SELECT distinct notice_id from notices where update_date>'!!p!! 23:59:59']]></main>
			</query>
			<query for="LTEQ">
				<main><![CDATA[SELECT distinct notice_id from notices where update_date<='!!p!! 23:59:59']]></main>
			</query>
			<query for="GTEQ">
				<main><![CDATA[SELECT distinct notice_id from notices where update_date>='!!p!!']]></main>
			</query>
			<query for="BETWEEN" notAllowedFor="list,query_list,marclist,query_auth">
				<main><![CDATA[SELECT distinct notice_id from notices where 
				if('!!p!!', update_date>='!!p!!', 1) and if('!!p1!!', update_date<='!!p1!! 23:59:59', 1)]]></main>
			</query>
			<query for="LESS_THAN_DAYS">
				<main><![CDATA[SELECT distinct notice_id from notices where update_date > DATE_SUB(NOW(), INTERVAL !!p!! DAY)]]></main>
			</query>
			<query for="MORE_THAN_DAYS">
				<main><![CDATA[SELECT distinct notice_id from notices where update_date < DATE_SUB(NOW(), INTERVAL !!p!! DAY)]]></main>
			</query>
			<query for="THIS_WEEK">
				<main><![CDATA[SELECT distinct notice_id from notices where WEEK(update_date,1) = WEEK(NOW()) AND YEAR(update_date) = YEAR(NOW())]]></main>
			</query>
			<query for="THIS_MONTH">
				<main><![CDATA[SELECT distinct notice_id from notices where MONTH(update_date) = MONTH(NOW()) AND YEAR(update_date) = YEAR(NOW())]]></main>
			</query>
			<query for="LAST_MONTH">
				<main><![CDATA[SELECT distinct notice_id from notices where PERIOD_DIFF(DATE_FORMAT(NOW(), '%Y%m'), DATE_FORMAT(update_date, '%Y%m')) = 1]]></main>
			</query>
			<query for="THIS_YEAR">
				<main><![CDATA[SELECT distinct notice_id from notices where YEAR(update_date) = YEAR(NOW())]]></main>
			</query>
		</field>
		<field group="5" title="msg:print_numeric_ex_title" id="44">
			<input type="query_list">
				<query>select distinct if(if(explnum_url,'URL',explnum_mimetype)!='',if(explnum_url,'URL',explnum_mimetype),''),if(if(explnum_url,'URL',explnum_mimetype)!='',if(explnum_url,'URL',explnum_mimetype),'Undefined') from explnum order by 1</query>
			</input>
			<query for="EQ">
				<main><![CDATA[(select distinct ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((explnum left join notices AS notices_m ON (explnum_notice = notices_m.notice_id))
					LEFT JOIN bulletins ON (explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON (bulletin_notice = notices_s.notice_id))
					WHERE if('!!p!!'='URL',explnum_url!='',explnum_mimetype='!!p!!')) 
					union
					(select distinct notice_id FROM explnum JOIN bulletins ON (explnum_bulletin = bulletins.bulletin_id AND explnum_notice = 0)
				    JOIN notices ON (num_notice = notice_id AND num_notice!=0)
				    WHERE if('!!p!!'='URL',explnum_url!='',explnum_mimetype='!!p!!'))]]></main>
			</query>
		</field>	
		<field group="5" title="msg:statut_explnum_sort" id="73">
			<input type="query_list">
				<query>select id_explnum_statut, gestion_libelle from explnum_statut order by gestion_libelle</query>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN explnum ON ( notice_id = explnum_notice ) 
				WHERE explnum_docnum_statut='!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN explnum ON explnum_bulletin = bulletin_id 
				WHERE explnum_docnum_statut='!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM explnum JOIN analysis ON (explnum_bulletin = analysis_bulletin AND explnum_bulletin !=0) 
				WHERE explnum_docnum_statut='!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM explnum JOIN bulletins ON (explnum_bulletin=bulletins.bulletin_id AND explnum_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE explnum_docnum_statut='!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
		</field>
		<field group="5" title="msg:explnum_lender" id="94">
			<input type="query_list">
				<query>select idlender, lender_libelle from lenders order by lender_libelle</query>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN explnum ON ( notice_id = explnum_notice ) JOIN explnum_lenders ON (explnum_lenders.explnum_lender_num_explnum = explnum.explnum_id)
				WHERE explnum_lenders.explnum_lender_num_lender ='!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN explnum ON explnum_bulletin = bulletin_id JOIN explnum_lenders ON (explnum_lenders.explnum_lender_num_explnum = explnum.explnum_id)
				WHERE explnum_lenders.explnum_lender_num_lender='!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM explnum JOIN analysis ON (explnum_bulletin = analysis_bulletin AND explnum_bulletin !=0) JOIN explnum_lenders ON (explnum_lenders.explnum_lender_num_explnum = explnum.explnum_id)
				WHERE explnum_lenders.explnum_lender_num_lender='!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM explnum JOIN bulletins ON (explnum_bulletin=bulletins.bulletin_id AND explnum_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) JOIN explnum_lenders ON (explnum_lenders.explnum_lender_num_explnum = explnum.explnum_id)
				WHERE explnum_lenders.explnum_lender_num_lender='!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>			
		</field>
		<field group="5" title="msg:explnum_location" id="95">
			<input type="query_list">
				<query>select idlocation, location_libelle from docs_location order by location_libelle</query>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN explnum ON ( notice_id = explnum_notice ) JOIN explnum_location ON (explnum_location.num_explnum = explnum.explnum_id)
				WHERE explnum_location.num_location ='!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN explnum ON explnum_bulletin = bulletin_id JOIN explnum_location ON (explnum_location.num_explnum = explnum.explnum_id)
				WHERE explnum_location.num_location='!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM explnum JOIN analysis ON (explnum_bulletin = analysis_bulletin AND explnum_bulletin !=0) JOIN explnum_location ON (explnum_location.num_explnum = explnum.explnum_id)
				WHERE explnum_location.num_location='!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM explnum JOIN bulletins ON (explnum_bulletin=bulletins.bulletin_id AND explnum_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) JOIN explnum_location ON (explnum_location.num_explnum = explnum.explnum_id)
				WHERE explnum_location.num_location='!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
		</field>	
		<field group="5" title="msg:274" id="45">
			<input type="text"/>
			<query for="CONTAINS">
				<main>select distinct notice_id from notices where lien like concat('%',replace('!!p!!','*','%'),'%') and lien!=''</main>
			</query>
		</field>
		<field group="5" title="msg:recherche_format_electronique" id="46">
			<input type="text"/>
			<query for="CONTAINS_AT_LEAST" multipleWords="yes" regdiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (!!multiple_term!!)]]></main>
				<multipleTerm>eformat like '%!!p!!%'</multipleTerm>
				<multipleOperator>or</multipleOperator>
			</query>
			<query for="CONTAINS_ALL" multipleWords="yes" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (!!multiple_term!!)]]></main>
				<multipleTerm>eformat like '%!!p!!%'</multipleTerm>
				<multipleOperator>and</multipleOperator>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (eformat like '!!p!!%')]]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (eformat like '%!!p!!')]]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (eformat='!!p!!')]]></main>
			</query>
			<query for="ISEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where (eformat like '')]]></main>
			</query>
			<query for="ISNOTEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices  where (eformat not like '')]]></main>
			</query>
		</field>
		<field group="5" title="msg:notice_is_new_search" id="91">
			<input type="list">
				<options>
					<option value="0">msg:39</option>
					<option value="1">msg:40</option>										
				</options>	
			</input>
			<query for="EQ" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where notice_is_new = '!!p!!']]></main>
			</query>
		</field>
		<field group="5" title="msg:notice_is_numeric_search" id="102">
			<input type="list">
				<options>
					<option value="0">msg:39</option>
					<option value="1">msg:40</option>										
				</options>	
			</input>
			<query for="EQ" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from notices where is_numeric = '!!p!!']]></main>
			</query>
		</field>
		<field group="5" title="msg:search_record_creator" id="92">
			<var name="pmb_type_audit" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="query_list">
				<query>select distinct userid, CONCAT(nom, ' ', prenom,' (',username,')') from users order by 1</query>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT DISTINCT notice_id FROM notices JOIN audit ON object_id = notice_id AND type_obj=1 AND type_modif=1 WHERE user_id=!!p!!]]></main>
			</query>
		</field>
		<field group="5" title="msg:search_record_modifier" id="104">
			<var name="pmb_type_audit" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="query_list">
				<query>select distinct userid, CONCAT(nom, ' ', prenom,' (',username,')') from users order by 1</query>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT DISTINCT notice_id 
				FROM notices 
				JOIN audit A ON object_id = notice_id 
				AND type_obj=1 
				AND type_modif=2 
				WHERE user_id=!!p!! 
				AND quand IN (
					SELECT MAX(quand) FROM audit WHERE type_obj=1 AND type_modif=2 AND object_id = A.object_id
				)]]></main>
			</query>
		</field>
		<field group="5" title="msg:search_record_contributor" id="98">
			<var name="pmb_type_audit" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="query_list">
				<query>select distinct user_id,  concat(empr_prenom, ' ', empr_nom) as prenom_nom from audit 
				 join empr on user_id = id_empr and type_user = 1 where type_obj = 1 order by 2</query>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT DISTINCT notice_id FROM notices JOIN audit ON object_id = notice_id AND type_obj=1 AND type_modif=1 AND type_user=1 WHERE user_id=!!p!!]]></main>
			</query>
		</field>
		<field group="5" title="msg:search_extended_record_id" id="106">
			<input type="text" />
			<query for="EQ">
				<main><![CDATA[SELECT DISTINCT notice_id FROM notices WHERE notice_id  IN (!!p!!)]]></main>
			</query>
		</field>
		<field group="6" title="msg:map_echelle" id="74">
			<var name="pmb_map_activate" visibility="yes">
				<value visibility="no">0</value>
			</var> 
			<input type="query_list">
				<query>select map_echelle_id, map_echelle_name from map_echelles order by map_echelle_name</query>
			</input>
			<query for="EQ">
				<main><![CDATA[select distinct notice_id from notices where map_echelle_num=!!p!!]]></main>
			</query>
		</field>
		<field group="6" title="msg:map_projection" id="75">
			<var name="pmb_map_activate" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="query_list">
				<query>select map_projection_id, map_projection_name from map_projections order by map_projection_name</query>
			</input>
			<query for="EQ">
				<main><![CDATA[select distinct notice_id from notices where map_projection_num=!!p!!]]></main>
			</query>
		</field>
		<field group="6" title="msg:map_ref" id="76">
			<var name="pmb_map_activate" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="query_list">
				<query>select map_ref_id, map_ref_name from map_refs order by map_ref_name</query>
			</input>
			<query for="EQ">
				<main><![CDATA[select distinct notice_id from notices where map_ref_num=!!p!!]]></main>
			</query>
		</field>
		<field group="6" title="msg:map_equinoxe" id="77">
			<var name="pmb_map_activate" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="text"/>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="map_equinoxe"></class>
			</query>
		</field>
		<field group="6" title="msg:map_emprise" id="78">
			<var name="pmb_map_activate" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="map"/>
			<query for="CONTAINS">
				<main>select distinct map_emprise_obj_num as notice_id from map_emprises where map_emprise_type=11 and contains(geomfromtext('!!p!!'),map_emprise_data) = 1 union select distinct notcateg_notice as notice_id from notices_categories join map_emprises on num_noeud = map_emprises.map_emprise_obj_num where map_emprise_type = 2 and contains(geomfromtext('!!p!!'),map_emprise_data) = 1</main>
			</query>
			<query for="AERASUP">
				<main>select distinct map_emprise_obj_num as notice_id from map_emprises where map_emprise_type=11 and Area((map_emprise_data)) &gt; Area(geomfromtext('!!p!!')) union select distinct notcateg_notice as notice_id from notices_categories join map_emprises on num_noeud = map_emprises.map_emprise_obj_num where map_emprise_type = 2 and Area((map_emprise_data)) &gt; Area(geomfromtext('!!p!!'))</main>
			</query>
			<query for="AERAINF">
				<main>select distinct map_emprise_obj_num as notice_id from map_emprises where map_emprise_type=11 and Area((map_emprise_data)) &lt; Area(geomfromtext('!!p!!')) union select distinct notcateg_notice as notice_id from notices_categories join map_emprises on num_noeud = map_emprises.map_emprise_obj_num where map_emprise_type = 2 and Area((map_emprise_data)) &lt; Area(geomfromtext('!!p!!'))</main>
			</query>
			<query for="INTERSECTS">
				<main>select distinct map_emprise_obj_num as notice_id from map_emprises where map_emprise_type=11 and intersects(geomfromtext('!!p!!'),map_emprise_data) = 1 union select distinct notcateg_notice as notice_id from notices_categories join map_emprises on num_noeud = map_emprises.map_emprise_obj_num where map_emprise_type = 2 and intersects(geomfromtext('!!p!!'),map_emprise_data)</main>
			</query>
			<query for="ISEMPTY">
				<main>select notice_id from notices where notice_id not in (select distinct map_emprise_obj_num as notice_id from map_emprises where map_emprise_type=11) and notice_id not in (select distinct notcateg_notice as notice_id from notices_categories join map_emprises on num_noeud = map_emprises.map_emprise_obj_num where map_emprise_type = 2)</main>
			</query>
			<query for="ISNOTEMPTY">
				<main>select distinct map_emprise_obj_num as notice_id from map_emprises where map_emprise_type=11 union select distinct notcateg_notice as notice_id from notices_categories join map_emprises on num_noeud = map_emprises.map_emprise_obj_num where map_emprise_type = 2</main>
			</query>
		</field>
		
		<field group="7" title="msg:nomenclature_search_formations" id="79">
			<var name="pmb_nomenclature_activate" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="query_list">
				<query>select id_formation, formation_name from nomenclature_formations order by formation_order</query>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and notice_nomenclature_num_formation='!!p!!']]></main>
			</query>
		</field>

		<field group="7" title="msg:nomenclature_search_types" id="80" >
			<var name="pmb_nomenclature_activate" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="query_list">
				<query>select id_type, type_name from nomenclature_types order by type_order</query>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and notice_nomenclature_num_type='!!p!!']]></main>
			</query>
		</field>	
		<field group="7" title="msg:nomenclature_search_formation_label" id="81">	
			<var name="pmb_nomenclature_activate" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type='text'/>
			<query for="STARTWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and notice_nomenclature_label like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and notice_nomenclature_label like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and notice_nomenclature_label like '!!p!!']]></main>
			</query>
			<query for="CONTAINS" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and notice_nomenclature_label like '%!!p!!%']]></main>
			</query>
			<query for="ISEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and (notice_nomenclature_label like '')]]></main>
			</query>
			<query for="ISNOTEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and (notice_nomenclature_label not like '')]]></main>
			</query>
		</field>	
		<field group="7" title="msg:nomenclature_search_workshop_label" id="82">	
			<var name="pmb_nomenclature_activate" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type='text'/>
			<query for="STARTWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, nomenclature_workshops, notices where workshop_num_nomenclature= id_notice_nomenclature and notice_id=notice_nomenclature_num_notice and workshop_label like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, nomenclature_workshops, notices where workshop_num_nomenclature= id_notice_nomenclature and notice_id=notice_nomenclature_num_notice and workshop_label like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, nomenclature_workshops, notices where workshop_num_nomenclature= id_notice_nomenclature and notice_id=notice_nomenclature_num_notice and workshop_label like '!!p!!']]></main>
			</query>
			<query for="CONTAINS" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, nomenclature_workshops, notices where workshop_num_nomenclature= id_notice_nomenclature and notice_id=notice_nomenclature_num_notice and workshop_label like '%!!p!!%']]></main>
			</query>
			<query for="ISEMPTY" regDiacrit="yes">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, nomenclature_workshops, notices where workshop_num_nomenclature= id_notice_nomenclature and notice_id=notice_nomenclature_num_notice and (workshop_label like '')]]></main>
			</query>
			<query for="ISNOTEMPTY" regDiacrit="yes">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, nomenclature_workshops, notices where workshop_num_nomenclature= id_notice_nomenclature and notice_id=notice_nomenclature_num_notice and (workshop_label not like '')]]></main>
			</query>
		</field>		
		<field group="7" title="msg:nomenclature_search_nomenclature_notes" id="84">	
			<var name="pmb_nomenclature_activate" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type='text'/>
			<query for="STARTWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and notice_nomenclature_notes like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and notice_nomenclature_notes like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and notice_nomenclature_notes like '!!p!!']]></main>
			</query>
			<query for="CONTAINS" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and notice_nomenclature_notes like '%!!p!!%']]></main>
			</query>
			<query for="ISEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and (notice_nomenclature_notes like '')]]></main>
			</query>
			<query for="ISNOTEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and (notice_nomenclature_notes not like '')]]></main>
			</query>
		</field>			
		<field group="7" title="msg:nomenclature_search_nomenclature_abbreviation" id="83">
			<var name="pmb_nomenclature_activate" visibility="yes">
				<value visibility="no">0</value>
			</var>	
			<input type='text'/>
			<query for="STARTWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and notice_nomenclature_abbreviation like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and notice_nomenclature_abbreviation like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and notice_nomenclature_abbreviation like '!!p!!']]></main>
			</query>
			<query for="CONTAINS" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and notice_nomenclature_abbreviation like '%!!p!!%']]></main>
			</query>
			<query for="ISEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and (notice_nomenclature_abbreviation like '')]]></main>
			</query>
			<query for="ISNOTEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and (notice_nomenclature_abbreviation not like '')]]></main>
			</query>
		</field>		
		<field group="7" title="msg:nomenclature_search_nomenclature_abbreviation_bois" id="85">	
			<var name="pmb_nomenclature_activate" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type='text'/>
			<query for="STARTWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',1) like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',1) like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',1) like '!!p!!']]></main>
			</query>
			<query for="CONTAINS" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',1) like '%!!p!!%']]></main>
			</query>
			<query for="ISEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and (SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',1) like '')]]></main>
			</query>
			<query for="ISNOTEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and (SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',1) not like '')]]></main>
			</query>
		</field>		
		<field group="7" title="msg:nomenclature_search_nomenclature_abbreviation_cuivres" id="86">	
			<var name="pmb_nomenclature_activate" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type='text'/>
			<query for="STARTWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and SUBSTRING_INDEX(SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',2),'-',-1) like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and SUBSTRING_INDEX(SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',2),'-',-1) like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and SUBSTRING_INDEX(SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',2),'-',-1) like '!!p!!']]></main>
			</query>
			<query for="CONTAINS" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and SUBSTRING_INDEX(SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',2),'-',-1) like '%!!p!!%']]></main>
			</query>
			<query for="ISEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and (SUBSTRING_INDEX(SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',2),'-',-1) like '')]]></main>
			</query>
			<query for="ISNOTEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and (SUBSTRING_INDEX(SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',2),'-',-1) not like '')]]></main>
			</query>
		</field>		
		<field group="7" title="msg:nomenclature_search_nomenclature_abbreviation_percussions" id="87">	
			<var name="pmb_nomenclature_activate" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type='text'/>
			<query for="STARTWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and SUBSTRING_INDEX(SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',3),'-',-1) like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and SUBSTRING_INDEX(SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',3),'-',-1) like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and SUBSTRING_INDEX(SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',3),'-',-1) like '!!p!!']]></main>
			</query>
			<query for="CONTAINS" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and SUBSTRING_INDEX(SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',3),'-',-1) like '%!!p!!%']]></main>
			</query>
			<query for="ISEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and (SUBSTRING_INDEX(SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',3),'-',-1) like '')]]></main>
			</query>
			<query for="ISNOTEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and (SUBSTRING_INDEX(SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',3),'-',-1) not like '')]]></main>
			</query>
		</field>		
		<field group="7" title="msg:nomenclature_search_nomenclature_abbreviation_cordes" id="88">	
			<var name="pmb_nomenclature_activate" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type='text'/>
			<query for="STARTWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',-1) like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',-1) like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',-1) like '!!p!!']]></main>
			</query>
			<query for="CONTAINS" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',-1) like '%!!p!!%']]></main>
			</query>
			<query for="ISEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and (SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',-1) like '')]]></main>
			</query>
			<query for="ISNOTEMPTY" regDiacrit="yes">
				<main><![CDATA[select distinct notice_id from nomenclature_notices_nomenclatures, notices where notice_id=notice_nomenclature_num_notice and (SUBSTRING_INDEX(notice_nomenclature_abbreviation,'-',-1) not like '')]]></main>
			</query>
		</field>
		<field group="7" title="msg:nomenclature_search_instruments_no_standard" id="89" >
			<var name="pmb_nomenclature_activate" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="query_list">
				<query>select id_instrument, instrument_code from nomenclature_instruments where instrument_standard=0  order by instrument_code, instrument_name</query>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT notice_id from nomenclature_notices_nomenclatures, notices, nomenclature_exotic_instruments where notice_id=notice_nomenclature_num_notice and id_notice_nomenclature=exotic_instrument_num_nomenclature and exotic_instrument_num_instrument='!!p!!']]></main>
			</query>
		</field>
		<field group="7" title="msg:nomenclature_search_instruments_workshop" id="90" >
			<var name="pmb_nomenclature_activate" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="query_list">
				<query>select id_instrument, instrument_code from nomenclature_instruments where instrument_standard=1  order by instrument_code, instrument_name</query>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT notice_id from nomenclature_notices_nomenclatures, notices, nomenclature_workshops,nomenclature_workshops_instruments where notice_id=notice_nomenclature_num_notice and id_notice_nomenclature=workshop_num_nomenclature and id_workshop=workshop_instrument_num_workshop and workshop_instrument_num_instrument='!!p!!']]></main>
			</query>
		</field>		
						
		<field group="8" title="msg:recherche_relationtypeup" id="47">
			<input type="marc_list">
				<name>relationtypeup</name>
				<restrictquery>SELECT group_concat(distinct relation_type SEPARATOR ',') as all_relation_type from notices,notices_relations where num_notice=notice_id and direction='up'</restrictquery>				
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id from notices,notices_relations where num_notice=notice_id and relation_type='!!p!!' and direction='up']]></main>
			</query>
		</field>
		<field group="8" title="msg:recherche_relationtypedown" id="48">
			<input type="marc_list">
				<name>relationtypedown</name>
				<restrictquery>SELECT group_concat(distinct relation_type SEPARATOR ',') as all_relation_type from notices,notices_relations where num_notice=notice_id and direction='down'</restrictquery>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id from notices,notices_relations where num_notice=notice_id and relation_type='!!p!!' and direction='down']]></main>			
			</query>
		</field>
		<field group="8" title="msg:recherche_relationtypeboth" id="97">
			<input type="marc_list">
				<name>relationtypeup</name>
				<restrictquery>SELECT group_concat(distinct relation_type SEPARATOR ',') as all_relation_type from notices,notices_relations where num_notice=notice_id and direction='both'</restrictquery>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id from notices,notices_relations where num_notice=notice_id and relation_type='!!p!!' and direction='both']]></main>			
			</query>
		</field>
		<field group="8" title="msg:recherche_exemplaires" id="71">
			<input type="list">
				<options>
					<option value="not in">msg:39</option>
					<option value="in">msg:40</option>
				</options>	
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id FROM notices WHERE notice_id !!p!! (
				SELECT notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice ) GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) GROUP BY notice_id)) AS sub1)]]></main>			
			</query>
		</field>	
		<field group="9" title="msg:localisation_sort" id="16">
			<input type="query_list">
				<query>select idlocation,location_libelle from docs_location order by location_libelle</query>	
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice ) 
				WHERE expl_location = '!!p!!' GROUP BY notice_id) 
				UNION  (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_location = '!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_location = '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_location = '!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
		</field>		
		<field group="9" title="msg:sur_location_sort" id="55" >
			<var name="pmb_sur_location_activate" visibility="yes">
				<value visibility="no">0</value>
			</var> 
			<input type="query_list">
				<query>select surloc_id,surloc_libelle from sur_location order by surloc_libelle</query>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice ) 
				WHERE expl_location in(select idlocation from docs_location where surloc_num='!!p!!') GROUP BY notice_id) 
				UNION  (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_location in(select idlocation from docs_location where surloc_num='!!p!!') GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_location in(select idlocation from docs_location where surloc_num='!!p!!') GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_location in(select idlocation from docs_location where surloc_num='!!p!!') GROUP BY notice_id)) AS sub1]]></main>
			</query>
		</field>			
		<field group="9" title="msg:4018" id="17">
			<input type="query_list">
				<query>select idsection,section_libelle from docs_section order by section_libelle</query>	
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice ) 
				WHERE expl_section='!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_section='!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_section='!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_section='!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
		</field>
		<field group="9" title="msg:651" id="18">
			<input type="query_list">
				<query>select idlender,lender_libelle from lenders order by lender_libelle</query>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice ) 
				WHERE expl_owner='!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_owner='!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_owner='!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_owner='!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
		</field>
		<field group="9" title="msg:294" id="19">
			<input type="query_list">
				<query>select idtyp_doc,tdoc_libelle from docs_type order by tdoc_libelle</query>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice ) 
				WHERE expl_typdoc='!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_typdoc='!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_typdoc='!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_typdoc='!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
		</field>
		<field group="9" title="msg:296" id="24">
			<input type="text"/>
			<query for="STARTWITH">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_cote like '!!p!!%' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_cote like '!!p!!%' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_cote like '!!p!!%' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_cote like '!!p!!%' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="CONTAINS">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_cote like '%!!p!!%' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_cote like '%!!p!!%' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_cote like '%!!p!!%' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_cote like '%!!p!!%' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="EXACT">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_cote like '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_cote like '!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_cote like '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_cote like '!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="ENDWITH">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_cote like '%!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_cote like '%!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_cote like '%!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_cote like '%!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
		</field>
		<field group="9" title="msg:codes_barres_query" id="29">
			<input type="text"/>
			<query for="STARTWITH">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_cb like '!!p!!%' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_cb like '!!p!!%' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_cb like '!!p!!%' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_cb like '!!p!!%' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="CONTAINS">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_cb like '%!!p!!%' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_cb like '%!!p!!%' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_cb like '%!!p!!%' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_cb like '%!!p!!%' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="ENDWITH">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_cb like '%!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_cb like '%!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_cb like '%!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_cb like '%!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="EXACT">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_cb like '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_cb like '!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_cb like '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_cb like '!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="ISEMPTY">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_cb like '' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_cb like '' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_cb like '' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_cb like '' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="ISNOTEMPTY">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_cb not like '' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_cb not like '' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_cb not like '' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_cb not like '' GROUP BY notice_id)) AS sub1]]></main>
			</query>
		</field>
		<field group="9" title="msg:297" id="30">
			<input type="query_list">
				<query>select idstatut,statut_libelle from docs_statut</query>	
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice ) 
				WHERE expl_statut='!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_statut='!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_statut='!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_statut='!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
		</field>
		<field group="9" title="msg:299" id="32">
			<input type="query_list">
				<query>select idcode,codestat_libelle from docs_codestat order by codestat_libelle</query>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice ) 
				WHERE expl_codestat='!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_codestat='!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_codestat='!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_codestat='!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
		</field>
		<field group="9" title="msg:expl_message" id="43">
			<input type='text'/>
			<query for="STARTWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_note like '!!p!!%' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_note like '!!p!!%' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_note like '!!p!!%' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_note like '!!p!!%' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="ENDWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_note like '%!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_note like '%!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_note like '%!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_note like '%!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="EXACT" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_note like '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_note like '!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_note like '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_note like '!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="CONTAINS" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_note like '%!!p!!%' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_note like '%!!p!!%' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_note like '%!!p!!%' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_note like '%!!p!!%' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="CONTAINS_AT_LEAST" multipleWords="yes" regDiacrit="yes">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE !!multiple_term!! GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE !!multiple_term!! GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE !!multiple_term!! GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE !!multiple_term!! GROUP BY notice_id)) AS sub1]]></main>
				<multipleTerm>expl_note like '%!!p!!%'</multipleTerm>
				<multipleOperator>or</multipleOperator>
			</query>
			<query for="CONTAINS_ALL" multipleWords="yes" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE !!multiple_term!! GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE !!multiple_term!! GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE !!multiple_term!! GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE !!multiple_term!! GROUP BY notice_id)) AS sub1]]></main>
				<multipleTerm>expl_note like '%!!p!!%'</multipleTerm>
				<multipleOperator>and</multipleOperator>
			</query>
			<query for="ISEMPTY" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_note like '' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_note like '' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_note like '' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_note like '' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="ISNOTEMPTY" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_note not like '' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_note not like '' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_note not like '' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_note not like '' GROUP BY notice_id)) AS sub1]]></main>
			</query>
		</field>
		<field group="9" title="msg:expl_zone_comment" id="53">
			<input type='text'/>
			<query for="STARTWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_comment like '!!p!!%' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_comment like '!!p!!%' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_comment like '!!p!!%' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_comment like '!!p!!%' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="ENDWITH" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_comment like '%!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_comment like '%!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_comment like '%!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_comment like '%!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="EXACT" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_comment like '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_comment like '!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_comment like '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_comment like '!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="CONTAINS" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_comment like '%!!p!!%' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_comment like '%!!p!!%' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_comment like '%!!p!!%' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_comment like '%!!p!!%' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="CONTAINS_AT_LEAST" multipleWords="yes" regDiacrit="yes">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE !!multiple_term!! GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE !!multiple_term!! GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE !!multiple_term!! GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE !!multiple_term!! GROUP BY notice_id)) AS sub1]]></main>
				<multipleTerm>expl_comment like '%!!p!!%'</multipleTerm>
				<multipleOperator>or</multipleOperator>
			</query>
			<query for="CONTAINS_ALL" multipleWords="yes" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE !!multiple_term!! GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE !!multiple_term!! GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE !!multiple_term!! GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE !!multiple_term!! GROUP BY notice_id)) AS sub1]]></main>
				<multipleTerm>expl_comment like '%!!p!!%'</multipleTerm>
				<multipleOperator>and</multipleOperator>
			</query>
			<query for="ISEMPTY" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_comment like '' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_comment like '' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_comment like '' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_comment like '' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="ISNOTEMPTY" regDiacrit="no">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_comment not like '' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_comment not like '' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_comment not like '' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_comment not like '' GROUP BY notice_id)) AS sub1]]></main>
			</query>
		</field>
		<field group="9" title="msg:date_creation_query" id="50">
			<input type='date' placeholder='msg:format_date_input_placeholder'/>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE exemplaires.create_date>='!!p!!' and exemplaires.create_date<='!!p!! 23:59:59' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE exemplaires.create_date>='!!p!!' and exemplaires.create_date<='!!p!! 23:59:59' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE exemplaires.create_date>='!!p!!' and exemplaires.create_date<='!!p!! 23:59:59' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE exemplaires.create_date>='!!p!!' and exemplaires.create_date<='!!p!! 23:59:59' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="LT">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE exemplaires.create_date<'!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE exemplaires.create_date<'!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE exemplaires.create_date<'!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE exemplaires.create_date<'!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="GT">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE exemplaires.create_date>'!!p!! 23:59:59' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE exemplaires.create_date>'!!p!! 23:59:59' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE exemplaires.create_date>'!!p!! 23:59:59' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE exemplaires.create_date>'!!p!! 23:59:59' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="LTEQ">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE exemplaires.create_date<='!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE exemplaires.create_date<='!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE exemplaires.create_date<='!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE exemplaires.create_date<='!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="GTEQ">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE exemplaires.create_date>='!!p!! 23:59:59' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE exemplaires.create_date>='!!p!! 23:59:59' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE exemplaires.create_date>='!!p!! 23:59:59' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE exemplaires.create_date>='!!p!! 23:59:59' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="BETWEEN" notAllowedFor="list,query_list,marclist,query_auth">
				<main><![CDATA[
				SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE if('!!p!!', exemplaires.create_date>='!!p!!', 1) and if('!!p1!!', exemplaires.create_date<='!!p1!! 23:59:59', 1) GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE if('!!p!!', exemplaires.create_date>='!!p!!', 1) and if('!!p1!!', exemplaires.create_date<='!!p1!! 23:59:59', 1) GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE if('!!p!!', exemplaires.create_date>='!!p!!', 1) and if('!!p1!!', exemplaires.create_date<='!!p1!! 23:59:59', 1) GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE if('!!p!!', exemplaires.create_date>='!!p!!', 1) and if('!!p1!!', exemplaires.create_date<='!!p1!! 23:59:59', 1) GROUP BY notice_id)) AS sub1]]></main>
			</query>
		</field>
		<field group="9" title="msg:filing_date" id="68">
			<input type='date' placeholder='msg:format_date_input_placeholder'/>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_date_depot like '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_date_depot like '!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_date_depot like '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_date_depot like '!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="LT">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_date_depot < '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_date_depot < '!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_date_depot < '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_date_depot < '!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="GT">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_date_depot > '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_date_depot > '!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_date_depot > '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_date_depot > '!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="LTEQ">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_date_depot <= '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_date_depot <= '!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_date_depot <= '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_date_depot <= '!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="GTEQ">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_date_depot >= '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_date_depot >= '!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_date_depot >= '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_date_depot >= '!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="BETWEEN" notAllowedFor="list,query_list,marclist,query_auth">
				<main><![CDATA[
				SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE if('!!p!!', expl_date_depot>='!!p!!', 1) and if('!!p1!!', expl_date_depot<='!!p1!!', 1) GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE if('!!p!!', expl_date_depot>='!!p!!', 1) and if('!!p1!!', expl_date_depot<='!!p1!!', 1) GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE if('!!p!!', expl_date_depot>='!!p!!', 1) and if('!!p1!!', expl_date_depot<='!!p1!!', 1) GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE if('!!p!!', expl_date_depot>='!!p!!', 1) and if('!!p1!!', expl_date_depot<='!!p1!!', 1) GROUP BY notice_id)) AS sub1]]></main>
			</query>
		</field>
		<field group="9" title="msg:return_date" id="69">
			<input type='date' placeholder='msg:format_date_input_placeholder'/>
			<query for="EQ">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_date_retour like '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_date_retour like '!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_date_retour like '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_date_retour like '!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="LT">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_date_retour < '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_date_retour < '!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_date_retour < '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_date_retour < '!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="GT">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_date_retour > '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_date_retour > '!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_date_retour > '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_date_retour > '!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="LTEQ">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_date_retour <= '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_date_retour <= '!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_date_retour <= '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_date_retour <= '!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="GTEQ">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE expl_date_retour >= '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE expl_date_retour >= '!!p!!' GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE expl_date_retour >= '!!p!!' GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE expl_date_retour >= '!!p!!' GROUP BY notice_id)) AS sub1]]></main>
			</query>
			<query for="BETWEEN" notAllowedFor="list,query_list,marclist,query_auth">
				<main><![CDATA[
				SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				WHERE if('!!p!!', expl_date_retour>='!!p!!', 1) and if('!!p1!!', expl_date_retour<='!!p1!!', 1) GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				WHERE if('!!p!!', expl_date_retour>='!!p!!', 1) and if('!!p1!!', expl_date_retour<='!!p1!!', 1) GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				WHERE if('!!p!!', expl_date_retour>='!!p!!', 1) and if('!!p1!!', expl_date_retour<='!!p1!!', 1) GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				WHERE if('!!p!!', expl_date_retour>='!!p!!', 1) and if('!!p1!!', expl_date_retour<='!!p1!!', 1) GROUP BY notice_id)) AS sub1]]></main>
			</query>
		</field>
		<field group="9" title="msg:search_item_creator" id="93">
			<var name="pmb_type_audit" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="query_list">
				<query>select distinct userid, CONCAT(nom, ' ', prenom,' (',username,')') from users order by 1</query>
			</input>
			<query for="EQ">		
				<main><![CDATA[SELECT distinct notice_id FROM (
				(SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice ) JOIN audit ON object_id = expl_id AND type_obj=2 AND type_modif=1 WHERE user_id=!!p!! GROUP BY notice_id) 
				UNION 
				(SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id JOIN audit ON object_id = expl_id AND type_obj=2 AND type_modif=1 WHERE user_id=!!p!! GROUP BY notice_id) 
				UNION
				(SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) JOIN audit ON object_id = expl_id AND type_obj=2 AND type_modif=1 WHERE user_id=!!p!! GROUP BY notice_id) 
				UNION
				(SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) JOIN audit ON object_id = expl_id AND type_obj=2 AND type_modif=1 WHERE user_id=!!p!! GROUP BY notice_id)
				) AS sub1]]></main>
			</query>
		</field>
		<field group="9" title="msg:ontology_skos_concept" id="1002">
			<var name="thesaurus_concepts_active" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="authoritie" ajax="onto" selector="ontology" p1="param1" p2="param2" />
			<variable name="deflt_concept_scheme" type="global"/>
			<variable name="id_scheme" type="input" comment="Schéma">
				<default type="var">deflt_concept_scheme</default>
				<input type="query_list">
					<query allChoice="yes" titleAllChoice="msg:thes_all">select 0 as id, 'Sans schéma' as lib union SELECT id_item as id, value as lib FROM skos_fields_global_index WHERE code_champ=100 group by 1 order by 2</query>
				</input>
			</variable>
			<variable name= "operator_between_multiple_authorities" type="input" comment="msg:operator_between_multiple_authorities">
				<default type="value">or</default>
				<input type="radio">
					<options>
						<label value="or">msg:operator_between_multiple_authorities_or</label>
						<label value="and">msg:operator_between_multiple_authorities_and</label>
					</options>
				</input>
			</variable>
			<query for="STARTWITH">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				JOIN index_concept ON index_concept.num_object = exemplaires.expl_id and index_concept.type_object = 10 join skos_fields_global_index on num_concept = id_item and code_champ = 1
				WHERE value like '!!p!!%' and if(0 in (!!id_scheme!!), 1, id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!))) GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				JOIN index_concept ON index_concept.num_object = exemplaires.expl_id and index_concept.type_object = 10 join skos_fields_global_index on num_concept = id_item and code_champ = 1
				WHERE value like '!!p!!%' and if(0 in (!!id_scheme!!), 1, id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!))) GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				JOIN index_concept ON index_concept.num_object = exemplaires.expl_id and index_concept.type_object = 10 join skos_fields_global_index on num_concept = id_item and code_champ = 1
				WHERE value like '!!p!!%' and if(0 in (!!id_scheme!!), 1, id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!))) GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				JOIN index_concept ON index_concept.num_object = exemplaires.expl_id and index_concept.type_object = 10 join skos_fields_global_index on num_concept = id_item and code_champ = 1
				WHERE value like '!!p!!%' and if(0 in (!!id_scheme!!), 1, id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!))) GROUP BY notice_id)) AS sub1 ORDER BY notice_id DESC]]></main>
			</query>
			<query for="ENDWITH">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				JOIN index_concept ON index_concept.num_object = exemplaires.expl_id and index_concept.type_object = 10 join skos_fields_global_index on num_concept = id_item and code_champ = 1
				WHERE value like '%!!p!!' and if(0 in (!!id_scheme!!), 1, id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!))) GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				JOIN index_concept ON index_concept.num_object = exemplaires.expl_id and index_concept.type_object = 10 join skos_fields_global_index on num_concept = id_item and code_champ = 1
				WHERE value like '%!!p!!' and if(0 in (!!id_scheme!!), 1, id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!))) GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				JOIN index_concept ON index_concept.num_object = exemplaires.expl_id and index_concept.type_object = 10 join skos_fields_global_index on num_concept = id_item and code_champ = 1
				WHERE value like '%!!p!!' and if(0 in (!!id_scheme!!), 1, id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!))) GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				JOIN index_concept ON index_concept.num_object = exemplaires.expl_id and index_concept.type_object = 10 join skos_fields_global_index on num_concept = id_item and code_champ = 1
				WHERE value like '%!!p!!' and if(0 in (!!id_scheme!!), 1, id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!))) GROUP BY notice_id)) AS sub1 ORDER BY notice_id DESC]]></main>
			</query>
			<query for="EXACT">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				JOIN index_concept ON index_concept.num_object = exemplaires.expl_id and index_concept.type_object = 10 join skos_fields_global_index on num_concept = id_item and code_champ = 1
				WHERE value like '!!p!!' and if(0 in (!!id_scheme!!), 1, id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!))) GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				JOIN index_concept ON index_concept.num_object = exemplaires.expl_id and index_concept.type_object = 10 join skos_fields_global_index on num_concept = id_item and code_champ = 1
				WHERE value like '!!p!!' and if(0 in (!!id_scheme!!), 1, id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!))) GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				JOIN index_concept ON index_concept.num_object = exemplaires.expl_id and index_concept.type_object = 10 join skos_fields_global_index on num_concept = id_item and code_champ = 1
				WHERE value like '!!p!!' and if(0 in (!!id_scheme!!), 1, id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!))) GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				JOIN index_concept ON index_concept.num_object = exemplaires.expl_id and index_concept.type_object = 10 join skos_fields_global_index on num_concept = id_item and code_champ = 1
				WHERE value like '!!p!!' and if(0 in (!!id_scheme!!), 1, id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!))) GROUP BY notice_id)) AS sub1 ORDER BY notice_id DESC]]></main>
			</query>
			<query for="AUTHORITY">
				<main><![CDATA[SELECT distinct notice_id FROM ((SELECT notice_id FROM notices JOIN exemplaires ON ( notice_id = expl_notice )
				JOIN index_concept ON index_concept.num_object = exemplaires.expl_id and index_concept.type_object = 10
				WHERE num_concept = !!p!! GROUP BY notice_id) 
				UNION (SELECT notice_id FROM notices JOIN bulletins ON bulletin_notice = notice_id JOIN exemplaires ON expl_bulletin = bulletin_id 
				JOIN index_concept ON index_concept.num_object = exemplaires.expl_id and index_concept.type_object = 10
				WHERE num_concept = !!p!! GROUP BY notice_id) 
				UNION (SELECT analysis_notice AS notice_id FROM exemplaires JOIN analysis ON (expl_bulletin = analysis_bulletin AND expl_bulletin !=0) 
				JOIN index_concept ON index_concept.num_object = exemplaires.expl_id and index_concept.type_object = 10
				WHERE num_concept = !!p!! GROUP BY notice_id) 
				UNION (SELECT notices.notice_id FROM exemplaires JOIN bulletins ON (expl_bulletin=bulletins.bulletin_id AND expl_bulletin!=0) JOIN notices ON (bulletins.num_notice=notices.notice_id AND bulletins.num_notice!=0) 
				JOIN index_concept ON index_concept.num_object = exemplaires.expl_id and index_concept.type_object = 10
				WHERE num_concept = !!p!! GROUP BY notice_id)) AS sub1 ORDER BY notice_id DESC]]></main>
				<main><![CDATA[select distinct explnum_notice as notice_id from explnum join index_concept on index_concept.num_object = explnum.explnum_id and index_concept.type_object = 11 where num_concept = !!p!!]]></main>
			</query>
		</field>
		<field group="10" title="msg:date_parution_bulletin_query" id="28">
			<input type="date" placeholder='msg:format_date_input_placeholder'/>
			<query for="GT">
				<main><![CDATA[(select distinct notice_id from bulletins join analysis on analysis_bulletin=bulletin_id join notices nota on analysis_notice=nota.notice_id where date_date>'!!p!!') union (select distinct notice_id from bulletins join notices notb on num_notice=notb.notice_id where date_date>'!!p!!')]]></main>
			</query>
			<query for="GTEQ">
				<main><![CDATA[(select distinct notice_id from bulletins join analysis on analysis_bulletin=bulletin_id join notices nota on analysis_notice=nota.notice_id where date_date>='!!p!!') union (select distinct notice_id from bulletins join notices notb on num_notice=notb.notice_id where date_date>='!!p!!')]]></main>
			</query>
			<query for="EQ">
				<main><![CDATA[(select distinct notice_id from bulletins join analysis on analysis_bulletin=bulletin_id join notices nota on analysis_notice=nota.notice_id where date_date='!!p!!') union (select distinct notice_id from bulletins join notices notb on num_notice=notb.notice_id where date_date='!!p!!')]]></main>
			</query>
			<query for="LTEQ">
				<main><![CDATA[(select distinct notice_id from bulletins join analysis on analysis_bulletin=bulletin_id join notices nota on analysis_notice=nota.notice_id where date_date<='!!p!!') union (select distinct notice_id from bulletins join notices notb on num_notice=notb.notice_id where date_date<='!!p!!')]]></main>
			</query>
			<query for="LT">
				<main><![CDATA[(select distinct notice_id from bulletins join analysis on analysis_bulletin=bulletin_id join notices nota on analysis_notice=nota.notice_id where date_date<'!!p!!') union (select distinct notice_id from bulletins join notices notb on num_notice=notb.notice_id where date_date<'!!p!!')]]></main>
			</query>
			<query for="BETWEEN" notAllowedFor="list,query_list,marclist,query_auth">
				<main><![CDATA[(select distinct notice_id from bulletins join analysis on analysis_bulletin=bulletin_id join notices nota on analysis_notice=nota.notice_id where 
				if('!!p!!', date_date >= '!!p!!', 1) and if('!!p1!!', date_date <= '!!p1!!', 1)) 
				union (select distinct notice_id from bulletins join notices notb on num_notice=notb.notice_id where 
				if('!!p!!', date_date >= '!!p!!', 1) and if('!!p1!!', date_date <= '!!p1!!', 1))]]></main>
			</query>
			<query for="ISEMPTY">
				<main><![CDATA[(SELECT DISTINCT notice_id 
				FROM bulletins 
				JOIN analysis ON analysis_bulletin=bulletin_id 
				JOIN notices nota ON analysis_notice=nota.notice_id 
				WHERE date_date='0000-00-00') 
				UNION 
				(SELECT DISTINCT notice_id 
				FROM bulletins 
				JOIN notices notb ON num_notice=notb.notice_id 
				WHERE date_date='0000-00-00')]]></main>
			</query>
			<query for="ISNOTEMPTY">
				<main><![CDATA[(SELECT DISTINCT notice_id 
				FROM bulletins 
				JOIN analysis ON analysis_bulletin=bulletin_id 
				JOIN notices nota ON analysis_notice=nota.notice_id 
				WHERE date_date !='0000-00-00') 
				UNION 
				(SELECT DISTINCT notice_id 
				FROM bulletins 
				JOIN notices notb ON num_notice=notb.notice_id 
				WHERE date_date !='0000-00-00')]]></main>
			</query>	
		</field>
		<field group="10" title="msg:titre_perio_query" id="34">
			<input type="query_list" completion="yes">
				<query>select notice_id, tit1 from notices, notice_statut where statut=id_notice_statut and niveau_biblio='s' and notice_visible_gestion=1 order by tit1, index_sew</query>
			</input>
			<variable name= "operator_between_multiple_authorities" type="input" comment="msg:operator_between_multiple_selection">
				<default type="value">or</default>
				<input type="radio">
					<options>
						<label value="or">msg:operator_between_multiple_selection_or</label>
						<label value="and">msg:operator_between_multiple_selection_and</label>
					</options>
				</input>
			</variable>
			<query for="EQ">
				<main><![CDATA[(select distinct notice_id from notices where niveau_biblio='s' and notice_id = !!p!!) union (select distinct notice_id from notices, bulletins where bulletin_notice in (!!p!!) and num_notice = notice_id) union (select distinct notice_id from notices, analysis, bulletins where bulletin_notice in (!!p!!) and analysis_bulletin=bulletin_id and analysis_notice=notice_id)]]></main>
			</query>
			<query for="CONTAINS">
				<main><![CDATA[select notice_id from notices where notice_id in (
  					select notice_id from (
					(select notice_id from notices where niveau_biblio='s' and index_sew like '%!!p!!%')
					union (select num_notice as notice_id from bulletins where num_notice <> 0 and bulletin_notice in (select notice_id from notices where niveau_biblio='s' and index_sew like '%!!p!!%'))
					union (select analysis_notice as notice_id from analysis, bulletins where bulletin_notice in (select notice_id from notices where niveau_biblio='s' and index_sew like '%!!p!!%') and analysis_bulletin=bulletin_id)
					) as sub)
				]]></main>
			</query>
			<query for="ISEMPTY">
				<main><![CDATA[SELECT DISTINCT notice_id 
					FROM notices 
					WHERE notice_id IN (
  						SELECT notice_id FROM (
							(SELECT notice_id FROM notices WHERE niveau_biblio='s' AND index_sew LIKE '')
							union 
							(SELECT num_notice AS notice_id FROM bulletins WHERE num_notice <> 0 AND bulletin_notice IN 
								(SELECT notice_id FROM notices WHERE niveau_biblio='s' AND index_sew like '')
							)
							union 
							(SELECT analysis_notice AS notice_id FROM analysis, bulletins WHERE bulletin_notice IN 
								(SELECT notice_id FROM notices WHERE niveau_biblio='s' AND index_sew like '') 
							AND analysis_bulletin=bulletin_id)
						) AS sub
					) 
					ORDER BY index_serie, tnvol, index_sew]]></main>
			</query>
			<query for="ISNOTEMPTY">
				<main><![CDATA[SELECT DISTINCT notice_id 
					FROM notices 
					WHERE notice_id IN (
  						SELECT notice_id FROM (
							(SELECT notice_id FROM notices WHERE niveau_biblio='s' AND index_sew NOT LIKE '')
							union 
							(SELECT num_notice AS notice_id FROM bulletins WHERE num_notice <> 0 AND bulletin_notice IN 
								(SELECT notice_id FROM notices WHERE niveau_biblio='s' AND index_sew NOT like '')
							)
							union 
							(SELECT analysis_notice AS notice_id FROM analysis, bulletins WHERE bulletin_notice IN 
								(SELECT notice_id FROM notices WHERE niveau_biblio='s' AND index_sew NOT like '') 
							AND analysis_bulletin=bulletin_id)
						) AS sub
					) 
					ORDER BY index_serie, tnvol, index_sew]]></main>
			</query>
		</field>
		<field group="10" title="msg:num_bull_query" id="35">
			<input type="text"/>
			<query for="CONTAINS">
				<main><![CDATA[select notice_id from notices where notice_id in (
  					select notice_id from (
					(select notice_id from bulletins join notices on bulletin_notice = notice_id where niveau_biblio='s' and bulletin_numero like '%!!p!!%')
					union (select num_notice as notice_id from bulletins where num_notice <> 0 and bulletin_numero like '%!!p!!%')
					union (select analysis_notice as notice_id from analysis, bulletins where bulletin_notice in (select notice_id from notices join bulletins on bulletin_notice = notice_id where niveau_biblio='s') and bulletin_numero like '%!!p!!%' and analysis_bulletin=bulletin_id)
					) as sub) order by index_serie, tnvol, index_sew
				]]></main>
			</query>
			<query for="ISEMPTY">
				<main><![CDATA[select notice_id from notices where notice_id in (
  					select notice_id from (
					(select notice_id from bulletins join notices on bulletin_notice = notice_id where niveau_biblio='s' and bulletin_numero like '')
					union (select num_notice as notice_id from bulletins where num_notice <> 0 and bulletin_numero like '')
					union (select analysis_notice as notice_id from analysis, bulletins where bulletin_notice in (select notice_id from notices join bulletins on bulletin_notice = notice_id where niveau_biblio='s') and bulletin_numero like '' and analysis_bulletin=bulletin_id)
					) as sub) order by index_serie, tnvol, index_sew
				]]></main>
			</query>
			<query for="ISNOTEMPTY">
				<main><![CDATA[select notice_id from notices where notice_id in (
  					select notice_id from (
					(select notice_id from bulletins join notices on bulletin_notice = notice_id where niveau_biblio='s' and bulletin_numero not like '')
					union (select num_notice as notice_id from bulletins where num_notice <> 0 and bulletin_numero not like '')
					union (select analysis_notice as notice_id from analysis, bulletins where bulletin_notice in (select notice_id from notices join bulletins on bulletin_notice = notice_id where niveau_biblio='s') and bulletin_numero not like '' and analysis_bulletin=bulletin_id)
					) as sub) order by index_serie, tnvol, index_sew
				]]></main>
			</query>
		</field>
		
		<field group="11" title="msg:collection_state_search_loc" id="56">
			<input type="query_list">
				<query>select idlocation,location_libelle from docs_location order by location_libelle</query>	
			</input>
			<query for="EQ">
				<main><![CDATA[select distinct notice_id from notices join collections_state on (notice_id=id_serial) where location_id=!!p!!]]></main>
			</query>
		</field>
		<field group="11" title="msg:collection_state_search_surloc" id="57">
			<var name="pmb_sur_location_activate" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="query_list">
				<query>select surloc_id,surloc_libelle from sur_location order by surloc_libelle</query>	
			</input>
			<query for="EQ">
				<main><![CDATA[select distinct notice_id from notices join collections_state on (notice_id=id_serial) join docs_location on (location_id=idlocation and surloc_num=!!p!!)]]></main>
			</query>
		</field>
		<field group="11" title="msg:collection_state_search_emp" id="58">
			<input type="query_list">
				<query>select archempla_id, archempla_libelle from arch_emplacement order by archempla_libelle</query>
			</input>
			<query for="EQ">
				<main><![CDATA[select distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_emplacement=!!p!!]]></main>
			</query>
		</field>
		
		<field group="11" title="msg:collection_state_search_sup" id="59">
			<input type="query_list">
				<query>select archtype_id, archtype_libelle from arch_type order by archtype_libelle</query>
			</input>
			<query for="EQ">
				<main><![CDATA[select distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_type=!!p!!]]></main>
			</query>
		</field>

		<field group="11" title="msg:collection_state_search_sta" id="60">
			<input type="query_list">
				<query>select archstatut_id, archstatut_gestion_libelle from arch_statut order by archstatut_gestion_libelle</query>
			</input>
			<query for="EQ">
				<main><![CDATA[select distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_statut=!!p!!]]></main>
			</query>
		</field>

		<field group="11" title="msg:collection_state_search_col" id="61">
			<input type="text"/>
			<query for="CONTAINS">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where state_collections like '%!!p!!%' group by notice_id]]></main>
			</query>
			<query for="STARTWITH">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where state_collections like '!!p!!%' group by notice_id]]></main>
			</query>
			<query for="ENDWITH">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where state_collections like '%!!p!!' group by notice_id]]></main>
			</query>
			<query for="EXACT">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where state_collections like '!!p!!' group by notice_id]]></main>
			</query>
		</field>

		<field group="11" title="msg:collection_state_search_cote" id="62">
			<input type="text"/>
			<query for="CONTAINS">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_cote like '%!!p!!%' group by notice_id]]></main>
			</query>
			<query for="STARTWITH">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_cote like '!!p!!%' group by notice_id]]></main>
			</query>
			<query for="ENDWITH">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_cote like '%!!p!!' group by notice_id]]></main>
			</query>
			<query for="EXACT">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_cote like '!!p!!' group by notice_id]]></main>
			</query>
		</field>

		<field group="11" title="msg:collection_state_search_arc" id="63">
			<input type="text"/>
			<query for="CONTAINS">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_archive like '%!!p!!%' group by notice_id]]></main>
			</query>
			<query for="STARTWITH">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_archive like '!!p!!%' group by notice_id]]></main>
			</query>
			<query for="ENDWITH">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_archive like '%!!p!!' group by notice_id]]></main>
			</query>
			<query for="EXACT">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_archive like '!!p!!' group by notice_id]]></main>
			</query>
		</field>

		<field group="11" title="msg:collection_state_search_org" id="64">
			<input type="text"/>
			<query for="CONTAINS">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_origine like '%!!p!!%' group by notice_id]]></main>
			</query>
			<query for="STARTWITH">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_origine like '!!p!!%' group by notice_id]]></main>
			</query>
			<query for="ENDWITH">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_origine like '%!!p!!' group by notice_id]]></main>
			</query>
			<query for="EXACT">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_origine like '!!p!!' group by notice_id]]></main>
			</query>
		</field>

		<field group="11" title="msg:collection_state_search_note" id="65">
			<input type="text"/>
			<query for="CONTAINS">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_note like '%!!p!!%' group by notice_id]]></main>
			</query>
			<query for="STARTWITH">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_note like '!!p!!%' group by notice_id]]></main>
			</query>
			<query for="ENDWITH">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_note like '%!!p!!' group by notice_id]]></main>
			</query>
			<query for="EXACT">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_note like '!!p!!' group by notice_id]]></main>
			</query>
		</field>

		<field group="11" title="msg:collection_state_search_lac" id="66">
			<input type="text"/>
			<query for="CONTAINS">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_lacune like '%!!p!!%' group by notice_id]]></main>
			</query>
			<query for="STARTWITH">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_lacune like '!!p!!%' group by notice_id]]></main>
			</query>
			<query for="ENDWITH">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_lacune like '%!!p!!' group by notice_id]]></main>
			</query>
			<query for="EXACT">
				<main><![CDATA[SELECT distinct notice_id from notices join collections_state on (notice_id=id_serial) where collstate_lacune like '!!p!!' group by notice_id]]></main>
			</query>
		</field>

		<field group="12" title="msg:caddie_de_NOTI" id="25">
			<input type="query_list">
				<query>select idcaddie,name from caddie where type='NOTI' order by name</query>
			</input>
			<variable name="ck_affiche" type="input">
				<default type="value">0</default>
				<input type="hidden">
					<value>1</value>
				</input> 
			</variable>
			<variable name= "is_pointed" type="input" comment="msg:caddie_item_marque">
				<default type="value">1</default>
				<input type="checkbox" default_on="ck_affiche">
					<value>1</value>
					<comments>
						<label value="1">msg:40</label>
						<label value="0">msg:39</label>
					</comments>
				</input>
			</variable>
			<variable name= "is_no_pointed" type="input" comment="msg:caddie_item_NonMarque">
				<default type="value">1</default>
				<input type="checkbox" default_on="ck_affiche">
					<value>1</value>
					<comments>
						<label value="1">msg:40</label>
						<label value="0">msg:39</label>
					</comments>
				</input>
			</variable>
			<query for="EQ">
				<main><![CDATA[select distinct object_id as notice_id from caddie_content,notices where caddie_id='!!p!!' and object_id=notices.notice_id and ((flag is not null && '!!is_pointed!!') or (flag is null && '!!is_no_pointed!!'))]]></main>
			</query>
		</field>
		<field group="12" title="msg:caddie_de_EXPL" id="26">
			<input type="query_list">
				<query>select idcaddie,name from caddie where type='EXPL' order by name</query>
			</input>
			<variable name="ck_affiche" type="input">
				<default type="value">0</default>
				<input type="hidden">
					<value>1</value>
				</input> 
			</variable>
			<variable name= "is_pointed" type="input" comment="msg:caddie_item_marque">
				<default type="value">1</default>
				<input type="checkbox" default_on="ck_affiche">
					<value>1</value>
					<comments>
						<label value="1">msg:40</label>
						<label value="0">msg:39</label>
					</comments>
				</input>
			</variable>
			<variable name= "is_no_pointed" type="input" comment="msg:caddie_item_NonMarque">
				<default type="value">1</default>
				<input type="checkbox" default_on="ck_affiche">
					<value>1</value>
					<comments>
						<label value="1">msg:40</label>
						<label value="0">msg:39</label>
					</comments>
				</input>
			</variable>
			<query for="EQ">
				<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM (((exemplaires LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id),caddie_content where expl_id=object_id and caddie_id='!!p!!' and ((flag is not null && '!!is_pointed!!') or (flag is null && '!!is_no_pointed!!')) group by notice_id]]></main>
			</query>
		</field>
		<field group="12" title="msg:caddie_de_BULL" id="27">
			<input type="query_list">
				<query>select idcaddie,name from caddie where type='BULL' order by name</query>
			</input>
			<variable name="ck_affiche" type="input">
				<default type="value">0</default>
				<input type="hidden">
					<value>1</value>
				</input> 
			</variable>
			<variable name= "is_pointed" type="input" comment="msg:caddie_item_marque">
				<default type="value">1</default>
				<input type="checkbox" default_on="ck_affiche">
					<value>1</value>
					<comments>
						<label value="1">msg:40</label>
						<label value="0">msg:39</label>
					</comments>
				</input>
			</variable>
			<variable name= "is_no_pointed" type="input" comment="msg:caddie_item_NonMarque">
				<default type="value">1</default>
				<input type="checkbox" default_on="ck_affiche">
					<value>1</value>
					<comments>
						<label value="1">msg:40</label>
						<label value="0">msg:39</label>
					</comments>
				</input>
			</variable>
			<query for="EQ">
				<main><![CDATA[select distinct notice_id from notices, bulletins, caddie_content where caddie_id='!!p!!' and bulletin_id=object_id and bulletin_notice=notice_id and ((flag is not null && '!!is_pointed!!') or (flag is null && '!!is_no_pointed!!'))]]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_oeuvre_type" id="7001" separator="msg:search_extended_titres_uniformes">
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="marc_list">
				<name>oeuvre_type</name>
				<restrictquery>SELECT group_concat(distinct tu_oeuvre_type SEPARATOR ',') as all_oeuvre_type from titres_uniformes</restrictquery>				
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu WHERE tu_oeuvre_type = '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_oeuvre_nature" id="7002" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="marc_list">
				<name>oeuvre_nature</name>
				<restrictquery>SELECT group_concat(distinct tu_oeuvre_nature SEPARATOR ',') as all_oeuvre_nature from titres_uniformes</restrictquery>				
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu WHERE tu_oeuvre_nature = '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_name" id="7003" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="text"/>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="titres_uniformes">
					<fieldrestrict>
						<field>code_champ</field>
						<values>26</values>
						<op>and</op>
						<sub>
							<fieldrestrict>
								<sub_field>code_ss_champ</sub_field>
								<values>01</values>
								<op>and</op>
							</fieldrestrict>
						</sub>
					</fieldrestrict>
				</class>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_name like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_name like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_name like '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_author" id="7007" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="authoritie" ajax="authors" selector="auteur" p1="param1" p2="param2"/>
			<variable name= "operator_between_multiple_authorities" type="input" comment="msg:operator_between_multiple_authorities">
				<default type="value">or</default>
				<input type="radio">
					<options>
						<label value="or">msg:operator_between_multiple_authorities_or</label>
						<label value="and">msg:operator_between_multiple_authorities_and</label>
					</options>
				</input>
			</variable>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="titres_uniformes">
					<fieldrestrict>
						<field>code_champ</field>
						<values>127</values>
						<op>and</op>
					</fieldrestrict>
				</class>
			</query>
			<query for="STARTWITH" regDiacrit="yes" Keep_EmptyWord="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join responsability_tu on responsability_tu.responsability_tu_num=notices_titres_uniformes.ntu_num_tu and responsability_tu.responsability_tu_type=0 join authors on authors.author_id=responsability_tu.responsability_tu_author_num  where author_name like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes" Keep_EmptyWord="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join responsability_tu on responsability_tu.responsability_tu_num=notices_titres_uniformes.ntu_num_tu and responsability_tu.responsability_tu_type=0 join authors on authors.author_id=responsability_tu.responsability_tu_author_num where author_name like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="yes" Keep_EmptyWord="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join responsability_tu on responsability_tu.responsability_tu_num=notices_titres_uniformes.ntu_num_tu and responsability_tu.responsability_tu_type=0 join authors on authors.author_id=responsability_tu.responsability_tu_author_num where author_name = '!!p!!']]></main>
			</query>
			<query for="AUTHORITY">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join responsability_tu on responsability_tu.responsability_tu_num=notices_titres_uniformes.ntu_num_tu and responsability_tu.responsability_tu_type=0 where responsability_tu.responsability_tu_author_num='!!p!!']]></main>
			</query>
			<query for='ISEMPTY'>
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where titres_uniformes.tu_id not in (select responsability_tu_author_num from responsability_tu where responsability_tu_type=0)]]></main>
			</query>
			<query for='ISNOTEMPTY'>
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where titres_uniformes.tu_id in (select responsability_tu_author_num from responsability_tu where responsability_tu_type=0)]]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_interpreter" id="7027" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="authoritie" ajax="authors" selector="auteur" p1="param1" p2="param2"/>
			<variable name= "operator_between_multiple_authorities" type="input" comment="msg:operator_between_multiple_authorities">
				<default type="value">or</default>
				<input type="radio">
					<options>
						<label value="or">msg:operator_between_multiple_authorities_or</label>
						<label value="and">msg:operator_between_multiple_authorities_and</label>
					</options>
				</input>
			</variable>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="titres_uniformes">
					<fieldrestrict>
						<field>code_champ</field>
						<values>128</values>
						<op>and</op>
					</fieldrestrict>
				</class>
			</query>
			<query for="STARTWITH" regDiacrit="yes" Keep_EmptyWord="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join responsability_tu on responsability_tu.responsability_tu_num=notices_titres_uniformes.ntu_num_tu and responsability_tu.responsability_tu_type=1 join authors on authors.author_id=responsability_tu.responsability_tu_author_num where author_name like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes" Keep_EmptyWord="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join responsability_tu on responsability_tu.responsability_tu_num=notices_titres_uniformes.ntu_num_tu and responsability_tu.responsability_tu_type=1 join authors on authors.author_id=responsability_tu.responsability_tu_author_num where author_name like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="yes" Keep_EmptyWord="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join responsability_tu on responsability_tu.responsability_tu_num=notices_titres_uniformes.ntu_num_tu and responsability_tu.responsability_tu_type=1 join authors on authors.author_id=responsability_tu.responsability_tu_author_num where author_name = '!!p!!']]></main>
			</query>
			<query for="AUTHORITY">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join responsability_tu on responsability_tu.responsability_tu_num=notices_titres_uniformes.ntu_num_tu and responsability_tu.responsability_tu_type=1 where responsability_tu.responsability_tu_author_num='!!p!!']]></main>
			</query>
			<query for='ISEMPTY'>
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where titres_uniformes.tu_id not in (select responsability_tu_author_num from responsability_tu where responsability_tu_type=1)]]></main>
			</query>
			<query for='ISNOTEMPTY'>
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where titres_uniformes.tu_id in (select responsability_tu_author_num from responsability_tu where responsability_tu_type=1)]]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_responsability_qualification" id="7028" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="authoritie" ajax="vedette" selector="vedette" p1="p1" p2="p2" />
			<var name="pmb_authors_qualification" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<variable name="grammars" type="input">
				<input type="hidden">
					<value>tu_authors</value>
				</input> 
			</variable>
			<variable name= "with_author" type="input" comment="msg:tu_authors_list">
				<default type="value">1</default>
				<input type="checkbox">
					<value>1</value>
					<comments>
						<label value="1">msg:40</label>
						<label value="0">msg:39</label>
					</comments>
				</input>
			</variable>
			<variable name= "with_interpreter" type="input" comment="msg:tu_interpreter_list">
				<default type="value">1</default>
				<input type="checkbox">
					<value>1</value>
					<comments>
						<label value="1">msg:40</label>
						<label value="0">msg:39</label>
					</comments>
				</input>
			</variable> 
			<query for="CONTAINS_AT_LEAST" multipleWords="yes" regdiacrit="no">
				<main><![CDATA[select distinct ntu_num_notice as notice_id from notices_titres_uniformes 
				join titres_uniformes on titres_uniformes.tu_id = notices_titres_uniformes.ntu_num_tu
				join responsability_tu on responsability_tu.responsability_tu_num = titres_uniformes.tu_id
				and (responsability_tu.responsability_tu_type = (case '!!with_author!!' when '1' then '0' else '-1' end) or responsability_tu.responsability_tu_type = '!!with_interpreter!!')
				join vedette_link on vedette_link.num_object = responsability_tu.id_responsability_tu and vedette_link.type_object in (2,6)
				join vedette on vedette.id_vedette = vedette_link.num_vedette
				where vedette.grammar in('!!grammars!!') and (!!multiple_term!!)]]></main>
				<multipleTerm>vedette.label like '%!!p!!%'</multipleTerm>
				<multipleOperator>or</multipleOperator>
			</query>
			<query for="CONTAINS_ALL" multipleWords="yes" regDiacrit="no">
				<main><![CDATA[select distinct ntu_num_notice as notice_id from notices_titres_uniformes 
				join titres_uniformes on titres_uniformes.tu_id = notices_titres_uniformes.ntu_num_tu
				join responsability_tu on responsability_tu.responsability_tu_num = titres_uniformes.tu_id
				and (responsability_tu.responsability_tu_type = (case '!!with_author!!' when '1' then '0' else '-1' end) or responsability_tu.responsability_tu_type = '!!with_interpreter!!')
				join vedette_link on vedette_link.num_object = responsability_tu.id_responsability_tu and vedette_link.type_object in (2,6)
				join vedette on vedette.id_vedette = vedette_link.num_vedette
				where vedette.grammar in('!!grammars!!') and (!!multiple_term!!)]]></main>
				<multipleTerm>vedette.label like '%!!p!!%'</multipleTerm>
				<multipleOperator>and</multipleOperator>
			</query>
			<query for="STARTWITH" regDiacrit="no">
				<main><![CDATA[select distinct ntu_num_notice as notice_id from notices_titres_uniformes 
				join titres_uniformes on titres_uniformes.tu_id = notices_titres_uniformes.ntu_num_tu
				join responsability_tu on responsability_tu.responsability_tu_num = titres_uniformes.tu_id
				and (responsability_tu.responsability_tu_type = (case '!!with_author!!' when '1' then '0' else '-1' end) or responsability_tu.responsability_tu_type = '!!with_interpreter!!')
				join vedette_link on vedette_link.num_object = responsability_tu.id_responsability_tu and vedette_link.type_object in (2,6)
				join vedette on vedette.id_vedette = vedette_link.num_vedette
				where vedette.grammar in('!!grammars!!') and vedette.label like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="no">
				<main><![CDATA[select distinct ntu_num_notice as notice_id from notices_titres_uniformes 
				join titres_uniformes on titres_uniformes.tu_id = notices_titres_uniformes.ntu_num_tu
				join responsability_tu on responsability_tu.responsability_tu_num = titres_uniformes.tu_id
				and (responsability_tu.responsability_tu_type = (case '!!with_author!!' when '1' then '0' else '-1' end) or responsability_tu.responsability_tu_type = '!!with_interpreter!!')
				join vedette_link on vedette_link.num_object = responsability_tu.id_responsability_tu and vedette_link.type_object in (2,6)
				join vedette on vedette.id_vedette = vedette_link.num_vedette
				where vedette.grammar in('!!grammars!!') and vedette.label like '%!!p!!']]></main>
			</query>
			<query for="AUTHORITY">
				<main><![CDATA[select distinct ntu_num_notice as notice_id from notices_titres_uniformes 
				join titres_uniformes on titres_uniformes.tu_id = notices_titres_uniformes.ntu_num_tu
				join responsability_tu on responsability_tu.responsability_tu_num = titres_uniformes.tu_id
				and (responsability_tu.responsability_tu_type = (case '!!with_author!!' when '1' then '0' else '-1' end) or responsability_tu.responsability_tu_type = '!!with_interpreter!!')
				join vedette_link on vedette_link.num_object = responsability_tu.id_responsability_tu and vedette_link.type_object in (2,6)
				where vedette.grammar in('!!grammars!!') and vedette_link.num_vedette = '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_forme" id="7008" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="text"/>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="titres_uniformes">
					<fieldrestrict>
						<field>code_champ</field>
						<values>26</values>
						<op>and</op>
						<sub>
							<fieldrestrict>
								<sub_field>code_ss_champ</sub_field>
								<values>09</values>
								<op>and</op>
							</fieldrestrict>
						</sub>
					</fieldrestrict>
				</class>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_forme like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_forme like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_forme like '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_forme_marclist" id="7009" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="marc_list">
				<name>music_form</name>
				<restrictquery>SELECT group_concat(distinct tu_forme_marclist SEPARATOR ',') as all_forme from titres_uniformes</restrictquery>				
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu
						WHERE tu_forme_marclist = '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_date" id="7010" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="text"/>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_date like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_date like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_date like '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_lieu" id="7011" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="text"/>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="titres_uniformes">
					<fieldrestrict>
						<field>code_champ</field>
						<values>26</values>
						<op>and</op>
						<sub>
							<fieldrestrict>
								<sub_field>code_ss_champ</sub_field>
								<values>12</values>
								<op>and</op>
							</fieldrestrict>
						</sub>
					</fieldrestrict>
				</class>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_lieu like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_lieu like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_lieu like '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_sujet" id="7012" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="text"/>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="titres_uniformes">
					<fieldrestrict>
						<field>code_champ</field>
						<values>26</values>
						<op>and</op>
						<sub>
							<fieldrestrict>
								<sub_field>code_ss_champ</sub_field>
								<values>11</values>
								<op>and</op>
							</fieldrestrict>
						</sub>
					</fieldrestrict>
				</class>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_sujet like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_sujet like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_sujet like '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_public" id="7013" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="text"/>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="titres_uniformes">
					<fieldrestrict>
						<field>code_champ</field>
						<values>26</values>
						<op>and</op>
						<sub>
							<fieldrestrict>
								<sub_field>code_ss_champ</sub_field>
								<values>15</values>
								<op>and</op>
							</fieldrestrict>
						</sub>
					</fieldrestrict>
				</class>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_public like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_public like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_public like '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_histoire" id="7014" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="text"/>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="titres_uniformes">
					<fieldrestrict>
						<field>code_champ</field>
						<values>26</values>
						<op>and</op>
						<sub>
							<fieldrestrict>
								<sub_field>code_ss_champ</sub_field>
								<values>13</values>
								<op>and</op>
							</fieldrestrict>
						</sub>
					</fieldrestrict>
				</class>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_histoire like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_histoire like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_histoire like '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_contexte" id="7015" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="text"/>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="titres_uniformes">
					<fieldrestrict>
						<field>code_champ</field>
						<values>26</values>
						<op>and</op>
						<sub>
							<fieldrestrict>
								<sub_field>code_ss_champ</sub_field>
								<values>16</values>
								<op>and</op>
							</fieldrestrict>
						</sub>
					</fieldrestrict>
				</class>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_contexte like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_contexte like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_contexte like '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_distrib" id="7016" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="text"/>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="titres_uniformes">
					<fieldrestrict>
						<field>code_champ</field>
						<values>123</values>
						<op>and</op>
					</fieldrestrict>
				</class>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join tu_distrib on tu_distrib.distrib_num_tu=notices_titres_uniformes.ntu_num_tu where distrib_name like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join tu_distrib on tu_distrib.distrib_num_tu=notices_titres_uniformes.ntu_num_tu where distrib_name like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join tu_distrib on tu_distrib.distrib_num_tu=notices_titres_uniformes.ntu_num_tu where distrib_name like '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_ref_num" id="7017" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="text"/>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="titres_uniformes">
					<fieldrestrict>
						<field>code_champ</field>
						<values>124</values>
						<op>and</op>
					</fieldrestrict>
				</class>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join tu_ref on tu_distrib.ref_num_tu=notices_titres_uniformes.ntu_num_tu where ref_name like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join tu_ref on tu_distrib.ref_num_tu=notices_titres_uniformes.ntu_num_tu where ref_name like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join tu_ref on tu_distrib.ref_num_tu=notices_titres_uniformes.ntu_num_tu where ref_name like '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_tonalite" id="7018" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="text"/>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="titres_uniformes">
					<fieldrestrict>
						<field>code_champ</field>
						<values>26</values>
						<op>and</op>
						<sub>
							<fieldrestrict>
								<sub_field>code_ss_champ</sub_field>
								<values>02</values>
								<op>and</op>
							</fieldrestrict>
						</sub>
					</fieldrestrict>
				</class>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_tonalite like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_tonalite like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_tonalite like '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_tonalite_marclist" id="7019" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="marc_list">
				<name>music_key</name>
				<restrictquery>SELECT group_concat(distinct tu_tonalite_marclist SEPARATOR ',') as all_tonalite from titres_uniformes</restrictquery>				
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu WHERE tu_tonalite_marclist = '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_coords" id="7020" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="text"/>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="titres_uniformes">
					<fieldrestrict>
						<field>code_champ</field>
						<values>26</values>
						<op>and</op>
						<sub>
							<fieldrestrict>
								<sub_field>code_ss_champ</sub_field>
								<values>17</values>
								<op>and</op>
							</fieldrestrict>
						</sub>
					</fieldrestrict>
				</class>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_coordonnees like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_coordonnees like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_coordonnees like '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_equinoxe" id="7021" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="text"/>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="titres_uniformes">
					<fieldrestrict>
						<field>code_champ</field>
						<values>26</values>
						<op>and</op>
						<sub>
							<fieldrestrict>
								<sub_field>code_ss_champ</sub_field>
								<values>18</values>
								<op>and</op>
							</fieldrestrict>
						</sub>
					</fieldrestrict>
				</class>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_equinoxe like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_equinoxe like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_equinoxe like '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_subdiv_forme" id="7022" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="text"/>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="titres_uniformes">
					<fieldrestrict>
						<field>code_champ</field>
						<values>125</values>
						<op>and</op>
					</fieldrestrict>
				</class>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join tu_subdiv on tu_subdiv.subdiv_num_tu=notices_titres_uniformes.ntu_num_tu where subdiv_name like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join tu_subdiv on tu_subdiv.subdiv_num_tu=notices_titres_uniformes.ntu_num_tu where subdiv_name like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join tu_subdiv on tu_subdiv.subdiv_num_tu=notices_titres_uniformes.ntu_num_tu where subdiv_name like '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_caracteristiques" id="7023" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="text"/>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="titres_uniformes">
					<fieldrestrict>
						<field>code_champ</field>
						<values>26</values>
						<op>and</op>
						<sub>
							<fieldrestrict>
								<sub_field>code_ss_champ</sub_field>
								<values>14</values>
								<op>and</op>
							</fieldrestrict>
						</sub>
					</fieldrestrict>
				</class>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_caracteristique like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_caracteristique like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_caracteristique like '!!p!!']]></main>
			</query>
			<query for='ISEMPTY'>
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_caracteristique = '']]></main>
			</query>
			<query for='ISNOTEMPTY'>
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_caracteristique <> '']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_comment" id="7024" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="text"/>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="titres_uniformes">
					<fieldrestrict>
						<field>code_champ</field>
						<values>26</values>
						<op>and</op>
						<sub>
							<fieldrestrict>
								<sub_field>code_ss_champ</sub_field>
								<values>03</values>
								<op>and</op>
							</fieldrestrict>
						</sub>
					</fieldrestrict>
				</class>
			</query>
			<query for="CONTAINS_AT_LEAST" multipleWords="yes" regdiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where (!!multiple_term!!)]]></main>
				<multipleTerm>tu_comment like '%!!p!!%'</multipleTerm>
				<multipleOperator>or</multipleOperator>
			</query>
			<query for="CONTAINS_ALL" multipleWords="yes" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where (!!multiple_term!!)]]></main>
				<multipleTerm>tu_comment like '%!!p!!%'</multipleTerm>
				<multipleOperator>and</multipleOperator>
			</query>
			<query for="STARTWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_comment like '!!p!!%']]></main>
			</query>
			<query for="ENDWITH" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_comment like '%!!p!!']]></main>
			</query>
			<query for="EXACT" regDiacrit="yes">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_comment like '!!p!!']]></main>
			</query>
			<query for='ISEMPTY'>
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_comment = '']]></main>
			</query>
			<query for='ISNOTEMPTY'>
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_comment <> '']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_concepts" id="7025" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<var name="thesaurus_concepts_active" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="authoritie" ajax="onto" selector="ontology" p1="param1" p2="param2" />
			<variable name="deflt_concept_scheme" type="global"/>
			<variable name="id_scheme" type="input" comment="Schéma">
				<default type="var">deflt_concept_scheme</default>
				<input type="query_list">
					<query allChoice="yes" titleAllChoice="msg:thes_all">SELECT id_item as id, value as lib FROM skos_fields_global_index WHERE code_champ=100 group by 1 order by 2</query>
				</input>
			</variable>
			<variable name= "operator_between_multiple_authorities" type="input" comment="msg:operator_between_multiple_authorities">
				<default type="value">or</default>
				<input type="radio">
					<options>
						<label value="or">msg:operator_between_multiple_authorities_or</label>
						<label value="and">msg:operator_between_multiple_authorities_and</label>
					</options>
				</input>
			</variable>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="titres_uniformes">
					<fieldrestrict>
						<field>code_champ</field>
						<values>126</values>
						<op>and</op>
					</fieldrestrict>
				</class>
			</query>
			<query for="STARTWITH">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join index_concept on index_concept.num_object = titres_uniformes.tu_id and index_concept.type_object = 8 join skos_fields_global_index on index_concept.num_concept = skos_fields_global_index.id_item and skos_fields_global_index.code_champ = 1 where value like '!!p!!%' and id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!))]]></main>
			</query>
			<query for="ENDWITH">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join index_concept on index_concept.num_object = titres_uniformes.tu_id and index_concept.type_object = 8 join skos_fields_global_index on index_concept.num_concept = skos_fields_global_index.id_item and skos_fields_global_index.code_champ = 1 where value like '%!!p!!' and id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!))]]></main>
			</query>
			<query for="EXACT">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join index_concept on index_concept.num_object = titres_uniformes.tu_id and index_concept.type_object = 8 join skos_fields_global_index on index_concept.num_concept = skos_fields_global_index.id_item and skos_fields_global_index.code_champ = 1 where value like '!!p!!' and id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!))]]></main>
			</query>
			<query for="AUTHORITY">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join index_concept on index_concept.num_object = titres_uniformes.tu_id and index_concept.type_object = 8 where index_concept.num_concept = !!p!!]]></main>
			</query>
			<query for="ISEMPTY">
				<main><![CDATA[select distinct notice_id from notices where notice_id not in (SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join index_concept on index_concept.num_object = titres_uniformes.tu_id and index_concept.type_object = 8 join skos_fields_global_index on index_concept.num_concept = skos_fields_global_index.id_item and skos_fields_global_index.code_champ = 1 where id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!)))]]></main>
			</query>
			<query for="ISNOTEMPTY">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join index_concept on index_concept.num_object = titres_uniformes.tu_id and index_concept.type_object = 8 join skos_fields_global_index on index_concept.num_concept = skos_fields_global_index.id_item and skos_fields_global_index.code_champ = 1 where id_item in (select id_item from skos_fields_global_index where code_champ = 4 and authority_num IN (!!id_scheme!!))]]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_concepts_autopostage" id="7029">
			<var name="thesaurus_concepts_autopostage" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="authoritie" ajax="onto" selector="ontology" p1="param1" p2="param2" />
			<variable name="deflt_concept_scheme" type="global"/>
			<variable name="id_scheme" type="input" comment="Schéma">
				<default type="var">deflt_concept_scheme</default>
				<input type="query_list">
					<query allChoice="yes" titleAllChoice="msg:thes_all">select 0 as id, 'Sans schéma' as lib union SELECT id_item as id, value as lib FROM skos_fields_global_index WHERE code_champ=100 group by 1 order by 2</query>
				</input>
			</variable>
			<variable name= "operator_between_multiple_authorities" type="input" comment="msg:operator_between_multiple_authorities">
				<default type="value">or</default>
				<input type="radio">
					<options>
						<label value="or">msg:operator_between_multiple_authorities_or</label>
						<label value="and">msg:operator_between_multiple_authorities_and</label>
					</options>
				</input>
			</variable>
			<query for="BOOLEAN" wordSearch="yes">
				<class type="records" mode="titres_uniformes">
					<fieldrestrict>
						<field>code_champ</field>
						<values>129</values>
						<op>or</op>
					</fieldrestrict>
				</class>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_completude" id="7026" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="list">
				<options>
					<option value="1">msg:aut_oeuvre_form_completude_finished</option>
					<option value="2">msg:aut_oeuvre_form_completude_infinite</option>
				</options>	
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu where tu_completude = '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_extended_titre_uniforme_statut" id="7099" >
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="query_list">
				<query>select id_authorities_statut, authorities_statut_label from authorities_statuts where authorities_statut_available_for like '%"7"%' order by authorities_statut_label</query>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu
				join authorities on authorities.num_object = titres_uniformes.tu_id and titres_uniformes.type_object = 7 where num_statut = '!!p!!']]></main>
			</query>
		</field>
		<field group="13" title="msg:search_tu_creator" id="7100">
			<var name="pmb_use_uniform_title" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<var name="pmb_type_audit" visibility="yes">
				<value visibility="no">0</value>
			</var>
			<input type="query_list">
				<query>select distinct userid, CONCAT(nom, ' ', prenom,' (',username,')') from users order by 1</query>
			</input>
			<query for="EQ">
				<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join audit ON audit.object_id = ntu_num_tu AND audit.type_obj=13 AND audit.type_modif=1 WHERE audit.user_id = '!!p!!']]></main>
			</query>
		</field>
		<field group="14" title="msg:search_access_rights_users_records" id="99">
                <var name="gestion_acces_user_notice" visibility="yes">
                        <value visibility="no">0</value>
                </var>
                <input type="query_list">
                        <query>SELECT prf_id, prf_name FROM acces_profiles WHERE prf_type=1 AND dom_num=1 AND prf_id=prf_used UNION SELECT '-1', 'Profil par défaut' FROM acces_profiles ORDER BY 1 </query>
                </input>
                <query for="EQ">
                        <main><![CDATA[SELECT DISTINCT notice_id FROM notices JOIN acces_res_1 ON notice_id=res_num WHERE res_prf_num=IF(!!p!!=-1,0,!!p!!)]]></main>
                </query>
        </field>
        <field group="14" title="msg:search_access_rights_empr_records" id="100">
                <var name="gestion_acces_empr_notice" visibility="yes">
                        <value visibility="no">0</value>
                </var>
                <input type="query_list">
                        <query>SELECT prf_id, prf_name FROM acces_profiles WHERE prf_type=1 AND dom_num=2 AND prf_id=prf_used UNION SELECT '-1', 'Profil par défaut' FROM acces_profiles ORDER BY 1 </query>
                </input>
                <query for="EQ">
                        <main><![CDATA[SELECT DISTINCT notice_id FROM notices JOIN acces_res_2 ON notice_id=res_num WHERE res_prf_num=IF(!!p!!=-1,0,!!p!!)]]></main>
                </query>
        </field>
        <field group="14" title="msg:search_access_rights_empr_explnum" id="101">
                <var name="gestion_acces_empr_docnum" visibility="yes">
                        <value visibility="no">0</value>
                </var>
                <input type="query_list">
                        <query>SELECT prf_id, prf_name FROM acces_profiles WHERE prf_type=1 AND dom_num=3 AND prf_id=prf_used UNION SELECT '-1', 'Profil par défaut' FROM acces_profiles ORDER BY 1 </query>
                </input>
                <query for="EQ">
                        <main><![CDATA[SELECT DISTINCT notice_id FROM notices JOIN explnum ON notice_id=explnum_notice JOIN acces_res_3 ON explnum_id=res_num WHERE res_prf_num=IF(!!p!!=-1,0,!!p!!)]]></main>
                </query>
        </field>
	</fixedFields>
	
	<!-- Zone dynamicFields :
		Liste des champs personalisés par type de données
			<field @att=id,dataType,memoryEngineForbidden> 
			-id : numéro unique arbitraire
			-dataType : type de données du champ personalisé
			-memoryEngineForbidden : "yes" interdit l'utilisation du moteur memory pour la création des tables temporaires
			<field> contient les sous tags :
			
				<query> : requete associée au champ et à l'opérateur
				<query @att=for,multipleWords,regDiacrit>
					-for : nom de l'opérateur auquel correspond la requete 
					 (les opérateurs non listés ne seront pas pris en compte), 
					-multipleWords (yes|no) : la requete tient compte de plusieurs termes saisis avec des espaces
					-regDiacrit (yes|no) : les termes sont passés par la fonction de nettoyage des mots vides et des accents
			 		<query> contient les sous tags :
					
						<main> : Corps principal de la requete, 
							-!!p!! sera remplacé dans la requete par le texte saisi pour la recherche, 
							-!!multiple_term!! (uniquement si multipleWords="yes") sera remplacé par la série  
							 de tests de la clause where pour chaque mot saisi
							-!!field!! sera remplacé par le numéro de champ personalisé
						
						<multipleTerm> : terme de condition utilisé pour remplacer !!multiple_term!!
						<multipleOperator> : opérateur utilisé entre les termes de conditions 
	-->
	
	<dynamicFields>
		<option order="" />
		<fieldType group="101" type="notices" prefix="d" >
			<field dataType="small_text" id="1">
				<query for="BOOLEAN" wordSearch="yes" searchableOnly="yes" notAllowedFor="list,query_list,date,external,resolve,marclist,query_auth,date_flot">
					<class type="records" mode="pfield"></class>
				</query>
				<query for="CONTAINS_AT_LEAST" multipleWords="yes" regDiacrit="yes" notAllowedFor="list,query_list,marclist,query_auth,date_flot">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where !!multiple_term!!]]></main>
					<multipleTerm>notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_small_text like '%!!p!!%'</multipleTerm>
					<multipleOperator>or</multipleOperator>
				</query>
				<query for="CONTAINS_ALL" multipleWords="yes" regDiacrit="yes" notAllowedFor="list,query_list,marclist,query_auth,date_flot">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where !!multiple_term!!]]></main>
					<multipleTerm>notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_small_text like '%!!p!!%'</multipleTerm>
					<multipleOperator>and</multipleOperator>
				</query>
				<query for="STARTWITH" notAllowedFor="list,query_list,marclist,query_auth,date_flot" regDiacrit="no">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_small_text like '!!p!!%']]></main>
				</query>
				<query for="ENDWITH" notAllowedFor="list,query_list,marclist,query_auth,date_flot" regDiacrit="no">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_small_text like '%!!p!!']]></main>
				</query>
				<query for="EXACT" notAllowedFor="list,query_list,marclist,query_auth,date_flot" regDiacrit="no">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_small_text='!!p!!']]></main>
				</query>
				<query for="NEAR" notAllowedFor="text,list,query_list,query_auth,date_box,comment,external,url,resolve,marclist,html,text_i18n,q_txt_i18n,date_inter">
				</query>
				<query for="LTEQ" notAllowedFor="text,list,query_list,query_auth,date_box,comment,external,url,resolve,marclist,html,text_i18n,q_txt_i18n,date_inter">
				</query>
				<query for="GTEQ" notAllowedFor="text,list,query_list,query_auth,date_box,comment,external,url,resolve,marclist,html,text_i18n,q_txt_i18n,date_inter">
				</query>
				<query for="BETWEEN" notAllowedFor="text,list,query_list,query_auth,date_box,comment,external,url,resolve,marclist,html,text_i18n,q_txt_i18n,date_inter">
				</query>
				<query for="EQ">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_small_text='!!p!!']]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[select distinct notice_id from notices left join notices_custom_values on notices_custom_origine=notice_id and notices_custom_champ=!!field!! where (notices_custom_small_text='' or notices_custom_small_text is null)]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_small_text!='']]></main>
				</query>
			</field>
			<field dataType="text" id="2">
				<query for="BOOLEAN" wordSearch="yes" searchableOnly="yes" notAllowedFor="list,query_list,date,external,resolve,marclist,query_auth">
					<class type="records" mode="pfield"></class>
				</query>
				<query for="CONTAINS_AT_LEAST" multipleWords="yes" regDiacrit="yes" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where !!multiple_term!!]]></main>
					<multipleTerm>notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_text like '%!!p!!%'</multipleTerm>
					<multipleOperator>or</multipleOperator>
				</query>
				<query for="CONTAINS_ALL" multipleWords="yes" regDiacrit="yes" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where !!multiple_term!!]]></main>
					<multipleTerm>notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_text like '%!!p!!%'</multipleTerm>
					<multipleOperator>and</multipleOperator>
				</query>
				<query for="STARTWITH" notAllowedFor="list,query_list,marclist,query_auth" regDiacrit="no">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_text like '!!p!!%']]></main>
				</query>
				<query for="ENDWITH" notAllowedFor="list,query_list,marclist,query_auth" regDiacrit="no">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_text like '%!!p!!']]></main>
				</query>
				<query for="EXACT" notAllowedFor="list,query_list,marclist,query_auth" regDiacrit="no">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_text='!!p!!']]></main>
				</query>
				<query for="EQ">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_text='!!p!!']]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[select distinct notice_id from notices left join notices_custom_values on notices_custom_origine=notice_id and notices_custom_champ=!!field!! where (notices_custom_text='' or notices_custom_text is null)]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_text!='']]></main>
				</query>
			</field>
			<field dataType="integer" id="3">
				<query for="EQ">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_integer='!!p!!']]></main>
				</query>
				<query for="LT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_integer<'!!p!!']]></main>
				</query>
				<query for="GT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_integer>'!!p!!']]></main>
				</query>
				<query for="LTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_integer<='!!p!!']]></main>
				</query>
				<query for="GTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_integer>='!!p!!']]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[select distinct notice_id from notices left join notices_custom_values on notices_custom_origine=notice_id and notices_custom_champ=!!field!! where (notices_custom_integer='' or notices_custom_integer is null)]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_integer!='']]></main>
				</query>
			</field>
			<field dataType="float" id="4">
				<query for="EQ">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and round(notices_custom_float,LENGTH(SUBSTRING_INDEX('!!p!!','.',-1)))='!!p!!']]></main>
				</query>
				<query for="LT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and round(notices_custom_float,LENGTH(SUBSTRING_INDEX('!!p!!','.',-1)))<'!!p!!']]></main>
				</query>
				<query for="GT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and round(notices_custom_float,LENGTH(SUBSTRING_INDEX('!!p!!','.',-1)))>'!!p!!']]></main>
				</query>
				<query for="LTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and round(notices_custom_float,LENGTH(SUBSTRING_INDEX('!!p!!','.',-1)))<='!!p!!']]></main>
				</query>
				<query for="GTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and round(notices_custom_float,LENGTH(SUBSTRING_INDEX('!!p!!','.',-1)))>='!!p!!']]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[select distinct notice_id from notices left join notices_custom_values on notices_custom_origine=notice_id and notices_custom_champ=!!field!! where (notices_custom_float='' or notices_custom_float is null)]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_float!='']]></main>
				</query>
			</field>
			<field dataType="date" id="5">
				<query for="EQ">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_date='!!p!!']]></main>
				</query>
				<query for="LT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_date<'!!p!!']]></main>
				</query>
				<query for="GT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_date>'!!p!!']]></main>
				</query>
				<query for="LTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_date<='!!p!!']]></main>
				</query>
				<query for="GTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_date>='!!p!!']]></main>
				</query>
				<query for="LESS_THAN_DAYS">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_date > DATE_SUB(NOW(), INTERVAL !!p!! DAY)]]></main>
				</query>
				<query for="MORE_THAN_DAYS">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_date < DATE_SUB(NOW(), INTERVAL !!p!! DAY)]]></main>
				</query>
				<query for="THIS_WEEK">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and WEEK(notices_custom_date,1) = WEEK(NOW()) and YEAR(notices_custom_date) = YEAR(NOW())]]></main>
				</query>
				<query for="THIS_MONTH">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and MONTH(notices_custom_date) = MONTH(NOW()) and YEAR(notices_custom_date) = YEAR(NOW())]]></main>
				</query>
				<query for="LAST_MONTH">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and PERIOD_DIFF(DATE_FORMAT(NOW(), '%Y%m'), DATE_FORMAT(notices_custom_date, '%Y%m')) = 1]]></main>
				</query>
				<query for="THIS_YEAR">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and YEAR(notices_custom_date) = YEAR(NOW())]]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[select distinct notice_id from notices left join notices_custom_values on notices_custom_origine=notice_id and notices_custom_champ=!!field!! where (notices_custom_date='' or notices_custom_date='0000-00-00' or notices_custom_date is null)]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and notices_custom_date!='' and notices_custom_date!=0]]></main>
				</query>
				<query for="BETWEEN" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices,notices_custom_values where notices_custom_champ=!!field!! and notices_custom_origine=notice_id and 
					if('!!p!!', notices_custom_date >= '!!p!!', 1) and if('!!p1!!', notices_custom_date <= '!!p1!!', 1)]]></main>
				</query>
			</field>
		</fieldType>
		<fieldType group="102" type="expl" prefix="e">
			<field dataType="small_text" id="1">
				<query for="CONTAINS_AT_LEAST" multipleWords="yes" regDiacrit="yes" notAllowedFor="list,query_list,marclist,query_auth,date_flot">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND (!!multiple_term!!) AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
					<multipleTerm>expl_custom_small_text like '%!!p!!%'</multipleTerm>
					<multipleOperator>or</multipleOperator>
				</query>
				<query for="CONTAINS_ALL" multipleWords="yes" regDiacrit="yes" notAllowedFor="list,query_list,marclist,query_auth,date_flot">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND (!!multiple_term!!) AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
					<multipleTerm>expl_custom_small_text like '%!!p!!%'</multipleTerm>
					<multipleOperator>and</multipleOperator>
				</query>
				<query for="STARTWITH" notAllowedFor="list,query_list,marclist,query_auth,date_flot" regDiacrit="no">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_small_text like '!!p!!%' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="ENDWITH" notAllowedFor="list,query_list,marclist,query_auth,date_flot" regDiacrit="no">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_small_text like '%!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="EXACT" notAllowedFor="list,query_list,marclist,query_auth,date_flot" regDiacrit="no">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_small_text = '!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="NEAR" notAllowedFor="text,list,query_list,query_auth,date_box,comment,external,url,resolve,marclist,html,text_i18n,q_txt_i18n,date_inter">
				</query>
				<query for="LTEQ" notAllowedFor="text,list,query_list,query_auth,date_box,comment,external,url,resolve,marclist,html,text_i18n,q_txt_i18n,date_inter">
				</query>
				<query for="GTEQ" notAllowedFor="text,list,query_list,query_auth,date_box,comment,external,url,resolve,marclist,html,text_i18n,q_txt_i18n,date_inter">
				</query>
				<query for="EQ">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_small_text = '!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires LEFT JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) WHERE (expl_custom_small_text='' or expl_custom_small_text is null) GROUP BY notice_id]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_origine=expl_id AND expl_custom_small_text!='') LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
			</field>
			<field dataType="text" id="2">
				<query for="CONTAINS_AT_LEAST" multipleWords="yes" regDiacrit="yes" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND (!!multiple_term!!) AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
					<multipleTerm>expl_custom_text like '%!!p!!%'</multipleTerm>
					<multipleOperator>or</multipleOperator>
				</query>
				<query for="CONTAINS_ALL" multipleWords="yes" regDiacrit="yes" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND (!!multiple_term!!) AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
					<multipleTerm>expl_custom_text like '%!!p!!%'</multipleTerm>
					<multipleOperator>and</multipleOperator>
				</query>
				<query for="STARTWITH" notAllowedFor="list,query_list,marclist,query_auth" regDiacrit="no">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_text like '!!p!!%' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="ENDWITH" notAllowedFor="list,query_list,marclist,query_auth" regDiacrit="no">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_text like '%!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="EXACT" notAllowedFor="list,query_list,marclist,query_auth" regDiacrit="no">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_text = '!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="EQ">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_text = '!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires LEFT JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) WHERE (expl_custom_text='' or expl_custom_text is null) GROUP BY notice_id]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_origine=expl_id AND expl_custom_text !='') LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
			</field>
			<field dataType="integer" id="3">
				<query for="EQ">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_integer = '!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="LT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_integer < '!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="GT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_integer > '!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="LTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_integer <= '!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="GTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_integer >= '!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires LEFT JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) WHERE (expl_custom_integer='' or expl_custom_integer is null) GROUP BY notice_id]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_origine=expl_id AND expl_custom_integer !='') LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
			</field>
			<field dataType="float" id="4">
				<query for="EQ">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_float = '!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="LT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_float < '!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="GT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_float > '!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="LTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_float <= '!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="GTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_float >= '!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires LEFT JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) WHERE (expl_custom_float='' or expl_custom_float is null) GROUP BY notice_id]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_origine=expl_id AND expl_custom_float !='') LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
			</field>
			<field dataType="date" id="5">
				<query for="EQ">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_date = '!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="LT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_date < '!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="GT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_date > '!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="LTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_date <= '!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="GTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_date >= '!!p!!' AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires LEFT JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) WHERE (expl_custom_date='' or expl_custom_date is null OR expl_custom_date ='0000-00-00') GROUP BY notice_id]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND expl_custom_origine=expl_id AND expl_custom_date !='' AND expl_custom_date !='0000-00-00') LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="BETWEEN" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((exemplaires JOIN expl_custom_values ON expl_custom_champ=!!field!! AND 
						if('!!p!!', expl_custom_date >= '!!p!!', 1) and if('!!p1!!', expl_custom_date <= '!!p1!!', 1) AND expl_custom_origine=expl_id) LEFT JOIN notices AS notices_m ON expl_notice = notices_m.notice_id ) LEFT JOIN bulletins ON expl_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>					
				</query>
			</field>
		</fieldType>
		<fieldType group="13" type="tu" prefix="tu">
			<field dataType="small_text" id="1">			    
				<query for="CONTAINS_AT_LEAST" multipleWords="yes" regDiacrit="yes" notAllowedFor="list,query_list,marclist,query_auth,date_flot">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id where !!multiple_term!!]]></main>
					<multipleTerm>tu_custom_champ=!!field!! and tu_custom_small_text like '%!!p!!%'</multipleTerm>
					<multipleOperator>or</multipleOperator>
				</query>
				<query for="CONTAINS_ALL" multipleWords="yes" regDiacrit="yes" notAllowedFor="list,query_list,marclist,query_auth,date_flot">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id where !!multiple_term!!]]></main>
					<multipleTerm>tu_custom_champ=!!field!! and tu_custom_small_text like '%!!p!!%'</multipleTerm>
					<multipleOperator>and</multipleOperator>
				</query>				
				<query for="STARTWITH" notAllowedFor="list,query_list,marclist,query_auth,date_flot" regDiacrit="no">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_small_text like '!!p!!%']]></main>
				</query>
				<query for="ENDWITH" notAllowedFor="list,query_list,marclist,query_auth,date_flot" regDiacrit="no">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id
						where tu_custom_champ=!!field!! and tu_custom_small_text like '%!!p!!']]></main>
				</query>
				<query for="EXACT" notAllowedFor="list,query_list,marclist,query_auth,date_flot" regDiacrit="no">
				    <main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_small_text like '!!p!!']]></main>
				 </query>
				<query for="NEAR" notAllowedFor="text,list,query_list,query_auth,date_box,comment,external,url,resolve,marclist,html,text_i18n,q_txt_i18n,date_inter">
				</query>
				<query for="LTEQ" notAllowedFor="text,list,query_list,query_auth,date_box,comment,external,url,resolve,marclist,html,text_i18n,q_txt_i18n,date_inter">
				</query>
				<query for="GTEQ" notAllowedFor="text,list,query_list,query_auth,date_box,comment,external,url,resolve,marclist,html,text_i18n,q_txt_i18n,date_inter">
				</query>
				<query for="BETWEEN" notAllowedFor="text,list,query_list,query_auth,date_box,comment,external,url,resolve,marclist,html,text_i18n,q_txt_i18n,date_inter">
				</query>						
				<query for="EQ">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_small_text like '!!p!!']]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu left join tu_custom_values on tu_custom_origine=tu_id 
						and tu_custom_champ=!!field!! where (tu_custom_small_text='' or tu_custom_small_text is null)]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_small_text != '']]></main>					  
				</query>
			</field>
			<field dataType="text" id="2">			    			    
				<query for="CONTAINS_AT_LEAST" multipleWords="yes" regDiacrit="yes" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id where !!multiple_term!!]]></main>
					<multipleTerm>tu_custom_champ=!!field!! and tu_custom_text like '%!!p!!%'</multipleTerm>
					<multipleOperator>or</multipleOperator>
				</query>
				<query for="CONTAINS_ALL" multipleWords="yes" regDiacrit="yes" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id where !!multiple_term!!]]></main>
					<multipleTerm>tu_custom_champ=!!field!! and tu_custom_text like '%!!p!!%'</multipleTerm>
					<multipleOperator>and</multipleOperator>
				</query>				
				<query for="STARTWITH" notAllowedFor="list,query_list,marclist,query_auth" regDiacrit="no">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_text like '!!p!!%']]></main>
				</query>
				<query for="ENDWITH" notAllowedFor="list,query_list,marclist,query_auth" regDiacrit="no">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_text like '%!!p!!']]></main>
				</query>
				<query for="EXACT" notAllowedFor="list,query_list,marclist,query_auth" regDiacrit="no">
				    <main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_text like '!!p!!']]></main>
				 </query>				
				<query for="EQ">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_text like '!!p!!']]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu left join tu_custom_values on tu_custom_origine=tu_id 
						and tu_custom_champ=!!field!! where (tu_custom_text='' or tu_custom_text is null)]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_text != '']]></main>					  
				</query>
			</field>			
			<field dataType="integer" id="3">
				<query for="EQ">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_integer like '!!p!!']]></main>
				</query>
				<query for="LT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_integer < '!!p!!']]></main>
				</query>
				<query for="GT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_integer > '!!p!!']]></main>
				</query>
				<query for="LTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_integer <= '!!p!!']]></main>
				</query>
				<query for="GTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_integer >= '!!p!!']]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu left join tu_custom_values on tu_custom_origine=tu_id 
						and tu_custom_champ=!!field!! where (tu_custom_integer='' or tu_custom_integer is null)]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_integer != '']]></main>
				</query>
			</field>
			<field dataType="float" id="4">
				<query for="EQ">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_float like '!!p!!']]></main>
				</query>
				<query for="LT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_float < '!!p!!']]></main>
				</query>
				<query for="GT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_float > '!!p!!']]></main>
				</query>
				<query for="LTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_float <= '!!p!!']]></main>
				</query>
				<query for="GTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_float >= '!!p!!']]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu left join tu_custom_values on tu_custom_origine=tu_id 
						and tu_custom_champ=!!field!! where (tu_custom_float='' or tu_custom_float is null)]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_float != '']]></main>
				</query>
			</field>
			<field dataType="date" id="5">
				<query for="EQ">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_date like '!!p!!']]></main>
				</query>
				<query for="LT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_date < '!!p!!']]></main>
				</query>
				<query for="GT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_date > '!!p!!']]></main>
				</query>
				<query for="LTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_date <= '!!p!!']]></main>
				</query>
				<query for="GTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_date >= '!!p!!']]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu left join tu_custom_values on tu_custom_origine=tu_id 
						and tu_custom_champ=!!field!! where (tu_custom_date='' or tu_custom_date is null)]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and tu_custom_date != '']]></main>
				</query>
				<query for="BETWEEN" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT distinct ntu_num_notice as notice_id from notices_titres_uniformes join titres_uniformes on tu_id = ntu_num_tu join tu_custom_values on tu_custom_origine=tu_id 
						where tu_custom_champ=!!field!! and 
						if('!!p!!', tu_custom_date  >= '!!p!!', 1) and if('!!p1!!', tu_custom_date <= '!!p1!!', 1)]]></main>					
				</query>
			</field>
		</fieldType>		
		<fieldType type="authperso" prefix="a">
			<field dataType="all_fields" id="10">
				<query for="STARTWITH" notAllowedFor="list,query_list,marclist,query_auth" regDiacrit="no">
					<main><![CDATA[SELECT DISTINCT notice_authperso_notice_num as notice_id FROM authperso_authorities JOIN notices_authperso ON notice_authperso_authority_num = id_authperso_authority WHERE authperso_index_infos_global like ' !!p!!%' AND authperso_authority_authperso_num = !!autperso_type_num!!]]></main>
				</query>
				<query for="ENDWITH" notAllowedFor="list,query_list,marclist,query_auth" regDiacrit="no">
					<main><![CDATA[SELECT DISTINCT notice_authperso_notice_num as notice_id FROM authperso_authorities JOIN notices_authperso ON notice_authperso_authority_num = id_authperso_authority WHERE authperso_index_infos_global like '%!!p!! ' AND authperso_authority_authperso_num = !!autperso_type_num!!]]></main>
				</query>
				<query for="EXACT" notAllowedFor="list,query_list,marclist,query_auth" regDiacrit="no">
					<main><![CDATA[SELECT DISTINCT notice_authperso_notice_num as notice_id FROM authperso_authorities JOIN notices_authperso ON notice_authperso_authority_num = id_authperso_authority WHERE authperso_index_infos_global like ' !!p!! ' AND authperso_authority_authperso_num = !!autperso_type_num!!]]></main>
				</query>
				<query for="CONTAINS" regDiacrit="no">
					<main><![CDATA[SELECT DISTINCT notice_authperso_notice_num as notice_id FROM authperso_authorities JOIN notices_authperso ON notice_authperso_authority_num = id_authperso_authority WHERE authperso_index_infos_global like '%!!p!!%' AND authperso_authority_authperso_num = !!autperso_type_num!!]]></main>
				</query>
				<query for="CONTAINS_AT_LEAST" multipleWords="yes" regDiacrit="yes">
					<main><![CDATA[SELECT DISTINCT notice_authperso_notice_num as notice_id FROM authperso_authorities JOIN notices_authperso ON notice_authperso_authority_num = id_authperso_authority WHERE !!multiple_term!! AND authperso_authority_authperso_num = !!autperso_type_num!!]]></main>
					<multipleTerm>authperso_index_infos_global LIKE '%!!p!!%'</multipleTerm>
					<multipleOperator>or</multipleOperator>
				</query>
				<query for="CONTAINS_ALL" multipleWords="yes" regDiacrit="no">
					<main><![CDATA[SELECT DISTINCT notice_authperso_notice_num as notice_id FROM authperso_authorities JOIN notices_authperso ON notice_authperso_authority_num = id_authperso_authority WHERE !!multiple_term!! AND authperso_authority_authperso_num = !!autperso_type_num!!]]></main>
					<multipleTerm>authperso_index_infos_global LIKE '%!!p!!%'</multipleTerm>
					<multipleOperator>and</multipleOperator>
				</query>
				<query for="ISEMPTY" regDiacrit="yes">
					<main><![CDATA[SELECT DISTINCT notice_id FROM notices WHERE notice_id NOT IN (SELECT DISTINCT notice_authperso_notice_num as notice_id FROM authperso_authorities JOIN notices_authperso ON notice_authperso_authority_num = authperso_authority_authperso_num WHERE authperso_index_infos_global NOT like '' AND authperso_authority_authperso_num = !!autperso_type_num!!) ORDER BY 1]]></main>
				</query>
				<query for="ISNOTEMPTY" regDiacrit="yes">
					<main><![CDATA[SELECT DISTINCT notice_authperso_notice_num as notice_id FROM authperso_authorities JOIN notices_authperso ON notice_authperso_authority_num = authperso_authority_authperso_num WHERE authperso_index_infos_global NOT like '' AND authperso_authority_authperso_num = !!autperso_type_num!!]]></main>
				</query>				
				<query for="AUTHORITY">
					<main><![CDATA[SELECT DISTINCT notice_authperso_notice_num as notice_id FROM notices_authperso WHERE notice_authperso_authority_num = '!!p!!' ORDER BY 1]]></main>
				</query>
			</field>
			<field dataType="small_text" id="1">			    
				<query for="CONTAINS_AT_LEAST" multipleWords="yes" regDiacrit="yes" notAllowedFor="list,query_list,marclist,query_auth,date_flot">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where !!multiple_term!!]]></main>
					<multipleTerm>notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_small_text like '%!!p!!%'</multipleTerm>
					<multipleOperator>or</multipleOperator>
				</query>
				<query for="CONTAINS_ALL" multipleWords="yes" regDiacrit="yes" notAllowedFor="list,query_list,marclist,query_auth,date_flot">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where !!multiple_term!!]]></main>
					<multipleTerm>notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_small_text like '%!!p!!%'</multipleTerm>
					<multipleOperator>and</multipleOperator>
				</query>				
				<query for="STARTWITH" notAllowedFor="list,query_list,marclist,query_auth,date_flot" regDiacrit="no">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_small_text like '!!p!!%']]></main>
				</query>
				<query for="ENDWITH" notAllowedFor="list,query_list,marclist,query_auth,date_flot" regDiacrit="no">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_small_text like '%!!p!!']]></main>
				</query>
				<query for="EXACT" notAllowedFor="list,query_list,marclist,query_auth,date_flot" regDiacrit="no">
				    <main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_small_text = '!!p!!']]></main>
				</query>
				<query for="NEAR" notAllowedFor="text,list,query_list,query_auth,date_box,comment,external,url,resolve,marclist,html,text_i18n,q_txt_i18n,date_inter">
				</query>
				<query for="LTEQ" notAllowedFor="text,list,query_list,query_auth,date_box,comment,external,url,resolve,marclist,html,text_i18n,q_txt_i18n,date_inter">
				</query>
				<query for="GTEQ" notAllowedFor="text,list,query_list,query_auth,date_box,comment,external,url,resolve,marclist,html,text_i18n,q_txt_i18n,date_inter">
				</query>
				<query for="BETWEEN" notAllowedFor="text,list,query_list,query_auth,date_box,comment,external,url,resolve,marclist,html,text_i18n,q_txt_i18n,date_inter">
				</query>				
				<query for="EQ">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_small_text = '!!p!!']]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and (authperso_custom_small_text='' or authperso_custom_small_text is null)]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_small_text != '']]></main>					  
				</query>
			</field>
			<field dataType="text" id="2">			    			    
				<query for="CONTAINS_AT_LEAST" multipleWords="yes" regDiacrit="yes" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where !!multiple_term!!]]></main>
					<multipleTerm>notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_text like '%!!p!!%'</multipleTerm>
					<multipleOperator>or</multipleOperator>
				</query>
				<query for="CONTAINS_ALL" multipleWords="yes" regDiacrit="yes" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where !!multiple_term!!]]></main>
					<multipleTerm>notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_text like '%!!p!!%'</multipleTerm>
					<multipleOperator>and</multipleOperator>
				</query>				
				<query for="STARTWITH" notAllowedFor="list,query_list,marclist,query_auth" regDiacrit="no">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_text like '!!p!!%']]></main>
				</query>
				<query for="ENDWITH" notAllowedFor="list,query_list,marclist,query_auth" regDiacrit="no">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_text like '%!!p!!']]></main>
				</query>
				<query for="EXACT" notAllowedFor="list,query_list,marclist,query_auth" regDiacrit="no">
				    <main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_text = '!!p!!']]></main>
				 </query>				
				<query for="EQ">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_text = '!!p!!']]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and (authperso_custom_text='' or authperso_custom_text is null)]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_text != '']]></main>					  
				</query>
			</field>			
			<field dataType="integer" id="3">
				<query for="EQ">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_integer = '!!p!!']]></main>
				</query>
				<query for="LT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_integer < '!!p!!']]></main>
				</query>
				<query for="GT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_integer > '!!p!!']]></main>
				</query>
				<query for="LTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_integer <= '!!p!!']]></main>
				</query>
				<query for="GTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_integer >= '!!p!!']]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and (authperso_custom_integer='' or authperso_custom_integer is null)]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_integer != '']]></main>
				</query>
			</field>
			<field dataType="float" id="4">
				<query for="EQ">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_float = '!!p!!']]></main>
				</query>
				<query for="LT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_float < '!!p!!']]></main>
				</query>
				<query for="GT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_float > '!!p!!']]></main>
				</query>
				<query for="LTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_float <= '!!p!!']]></main>
				</query>
				<query for="GTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_float >= '!!p!!']]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and (authperso_custom_float='' or authperso_custom_float is null)]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_float != '']]></main>
				</query>
			</field>
			<field dataType="date" id="5">
				<query for="EQ">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_date = '!!p!!']]></main>
				</query>
				<query for="LT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_date < '!!p!!']]></main>
				</query>
				<query for="GT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_date > '!!p!!']]></main>
				</query>
				<query for="LTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_date <= '!!p!!']]></main>
				</query>
				<query for="GTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_date >= '!!p!!']]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and (authperso_custom_date='' or authperso_custom_date is null)]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and
					    authperso_custom_champ=!!field!! and authperso_custom_date != '']]></main>
				</query>
				<query for="BETWEEN" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[select distinct notice_id from notices, notices_authperso, authperso_authorities, authperso_custom_values where
					    notice_authperso_notice_num=notice_id and notice_authperso_authority_num = id_authperso_authority AND id_authperso_authority=authperso_custom_origine and authperso_custom_champ=!!field!! and 
					    if('!!p!!', authperso_custom_date >= '!!p!!', 1) and if('!!p1!!', authperso_custom_date <= '!!p1!!', 1)]]></main>					
				</query>
			</field>
		</fieldType>
		<fieldType group="103" type="explnum" prefix="en">
			<field dataType="small_text" id="1">
				<query for="CONTAINS_AT_LEAST" multipleWords="yes" regDiacrit="yes" notAllowedFor="list,query_list,marclist,query_auth,date_flot">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND (!!multiple_term!!) AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
					<multipleTerm>explnum_custom_small_text like '%!!p!!%'</multipleTerm>
					<multipleOperator>or</multipleOperator>
				</query>
				<query for="CONTAINS_ALL" multipleWords="yes" regDiacrit="yes" notAllowedFor="list,query_list,marclist,query_auth,date_flot">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND (!!multiple_term!!) AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
					<multipleTerm>explnum_custom_small_text like '%!!p!!%'</multipleTerm>
					<multipleOperator>and</multipleOperator>
				</query>
				<query for="STARTWITH" notAllowedFor="list,query_list,marclist,query_auth,date_flot" regDiacrit="no">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_small_text like '!!p!!%' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="ENDWITH" notAllowedFor="list,query_list,marclist,query_auth,date_flot" regDiacrit="no">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_small_text like '%!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="EXACT" notAllowedFor="list,query_list,marclist,query_auth,date_flot" regDiacrit="no">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_small_text = '!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="NEAR" notAllowedFor="text,list,query_list,query_auth,date_box,comment,external,url,resolve,marclist,html,text_i18n,q_txt_i18n,date_inter">
				</query>
				<query for="LTEQ" notAllowedFor="text,list,query_list,query_auth,date_box,comment,external,url,resolve,marclist,html,text_i18n,q_txt_i18n,date_inter">
				</query>
				<query for="GTEQ" notAllowedFor="text,list,query_list,query_auth,date_box,comment,external,url,resolve,marclist,html,text_i18n,q_txt_i18n,date_inter">
				</query>
				<query for="BETWEEN" notAllowedFor="text,list,query_list,query_auth,date_box,comment,external,url,resolve,marclist,html,text_i18n,q_txt_i18n,date_inter">
				</query>
				<query for="EQ">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_small_text = '!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum LEFT JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) WHERE (explnum_custom_small_text='' or explnum_custom_small_text is null) GROUP BY notice_id]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_origine=explnum_id AND explnum_custom_small_text!='') LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
			</field>
			<field dataType="text" id="2">
				<query for="CONTAINS_AT_LEAST" multipleWords="yes" regDiacrit="yes" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND (!!multiple_term!!) AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
					<multipleTerm>explnum_custom_text like '%!!p!!%'</multipleTerm>
					<multipleOperator>or</multipleOperator>
				</query>
				<query for="CONTAINS_ALL" multipleWords="yes" regDiacrit="yes" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND (!!multiple_term!!) AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
					<multipleTerm>explnum_custom_text like '%!!p!!%'</multipleTerm>
					<multipleOperator>and</multipleOperator>
				</query>
				<query for="STARTWITH" notAllowedFor="list,query_list,marclist,query_auth" regDiacrit="no">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_text like '!!p!!%' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="ENDWITH" notAllowedFor="list,query_list,marclist,query_auth" regDiacrit="no">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_text like '%!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="EXACT" notAllowedFor="list,query_list,marclist,query_auth" regDiacrit="no">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_text = '!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="EQ">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_text = '!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum LEFT JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) WHERE (explnum_custom_text='' or explnum_custom_text is null) GROUP BY notice_id]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_origine=explnum_id AND explnum_custom_text !='') LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
			</field>
			<field dataType="integer" id="3">
				<query for="EQ">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_integer = '!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="LT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_integer < '!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="GT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_integer > '!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="LTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_integer <= '!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="GTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_integer >= '!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum LEFT JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) WHERE (explnum_custom_integer='' or explnum_custom_integer is null) GROUP BY notice_id]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_origine=explnum_id AND explnum_custom_integer !='') LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
			</field>
			<field dataType="float" id="4">
				<query for="EQ">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_float = '!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="LT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_float < '!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="GT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_float > '!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="LTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_float <= '!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="GTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_float >= '!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum LEFT JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) WHERE (explnum_custom_float='' or explnum_custom_float is null) GROUP BY notice_id]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_origine=explnum_id AND explnum_custom_float !='') LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
			</field>
			<field dataType="date" id="5">
				<query for="EQ">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_date = '!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="LT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_date < '!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="GT" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_date > '!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="LTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_date <= '!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="GTEQ" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_date >= '!!p!!' AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="ISEMPTY">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum LEFT JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) WHERE (explnum_custom_date='' or explnum_custom_date is null OR explnum_custom_date ='0000-00-00') GROUP BY notice_id]]></main>
				</query>
				<query for="ISNOTEMPTY">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND explnum_custom_origine=explnum_id AND explnum_custom_date !='' AND explnum_custom_date !='0000-00-00') LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>
				</query>
				<query for="BETWEEN" notAllowedFor="list,query_list,marclist,query_auth">
					<main><![CDATA[SELECT ifnull(notices_m.notice_id,notices_s.notice_id) as notice_id FROM ((((explnum JOIN explnum_custom_values ON explnum_custom_champ=!!field!! AND 
						if('!!p!!', explnum_custom_date  >= '!!p!!', 1) and if('!!p1!!', explnum_custom_date <= '!!p1!!', 1) AND explnum_custom_origine=explnum_id) LEFT JOIN notices AS notices_m ON explnum_notice = notices_m.notice_id ) LEFT JOIN bulletins ON explnum_bulletin = bulletins.bulletin_id) LEFT JOIN notices AS notices_s ON bulletin_notice = notices_s.notice_id) GROUP BY notice_id]]></main>					
				</query>
			</field>
		</fieldType>
	</dynamicFields>
	
	<specialFields>
		<field group="1001" type="combine" title="msg:histo_title" id="1"/>
		<field type="openurl" title="msg:special_search_openurl" id="2" delnotallowed="yes" opacVisibility="no" visible="no"/>
		<field type="facette" title="msg:search_facette" id="3" opacVisibility="no" visible="no"/>
		<field type="simple_search" title="msg:search_persopac_table_humanquery" id="4" opacVisibility="no" visible="no"/>
		<field group="1001" type="last_import_isbn_doublons" title="msg:last_import_isbn_doublons" id="5" opacVisibility="no"/>
		<field type="combine_extended_search" title="msg:combine_extended_search" id="11" opacVisibility="no"/>
		<field type="map_circle" group="6" title="msg:search_extended_map_circle" id="104" />		
	</specialFields>
	
	<operators>
		<operator name="BOOLEAN">msg:expr_bool_query</operator>
		<operator name="CONTAINS">msg:203</operator>
		<operator name="CONTAINS_ALL">msg:contient_tous_mots_query</operator>
		<operator name="CONTAINS_AT_LEAST">msg:contient_plus_un_mot_query</operator>
		<operator name="STARTWITH">msg:commence_par_query</operator>
		<operator name="ENDWITH">msg:finit_par_query</operator>
		<operator name="EXACT">msg:exactement_comme_query</operator>
		<operator name="EQ">msg:eq_query</operator>
		<operator name="GT">msg:gt_query</operator>
		<operator name="LT">msg:lt_query</operator>
		<operator name="GTEQ">msg:gteq_query</operator>
		<operator name="LTEQ">msg:lteq_query</operator>
		<operator name="ISEMPTY" emptyAllowed="yes">msg:est_vide_query</operator>
		<operator name="ISNOTEMPTY" emptyAllowed="yes">msg:pas_vide_query</operator>
		<operator name="AUTHORITY">msg:authority_query</operator>
		<operator name="AERASUP">msg:map_multisearch_aerasup</operator>
		<operator name="AERAINF">msg:map_multisearch_aerainf</operator>
		<operator name="INTERSECTS">msg:map_multisearch_intersects</operator>
		<operator name="BETWEEN">msg:search_between_query</operator>
		<operator name="NEAR">msg:parperso_option_duration_type0</operator>
		<operator name="LESS_THAN_DAYS">msg:less_than_days_query</operator>
		<operator name="MORE_THAN_DAYS">msg:more_than_days_query</operator>
		<operator name="THIS_WEEK" emptyAllowed="yes">msg:this_week_query</operator>
		<operator name="LAST_WEEK" emptyAllowed="yes">msg:last_week_query</operator>
		<operator name="THIS_MONTH" emptyAllowed="yes">msg:this_month_query</operator>
		<operator name="LAST_MONTH" emptyAllowed="yes">msg:last_month_query</operator>
		<operator name="THIS_YEAR" emptyAllowed="yes">msg:this_year_query</operator>
	</operators>
	
	<!-- Les groupes sont associés aux champs (fields) et permettent d'amener une notion de classement -->
	<groups>
		<group id="1">
			<order>1</order>
			<label>msg:champs_principaux_query</label>
		</group>
		<group id="2">
			<order>2</order>
			<label>msg:264</label>
		</group>
		<group id="3">
			<order>3</order>
			<label>msg:indexations_query</label>
		</group>
		<group id="4">
			<order>4</order>
			<label>msg:537</label>
		</group>
		<group id="5">
			<order>5</order>
			<label>msg:130</label>
		</group>
		<group id="6">
			<order>6</order>
			<label>msg:map_search</label>
		</group>
		<group id="7">
			<order>7</order>
			<label>msg:nomenclature_search</label>
		</group>
		<group id="8">
			<order>8</order>
			<label>msg:recherche_relation</label>
		</group>
		<group id="9">
			<order>9</order>
			<label>msg:exemplaires_query</label>
		</group>
		<group id="10">
			<order>10</order>
			<label>msg:4010</label>
		</group>
		<group id="11">
			<order>11</order>
			<label>msg:collection_state_search</label>
		</group>
		<group id="12">
			<order>12</order>
			<label>msg:caddie_menu</label>
		</group>
		<group id="13">
			<order>13</order>
			<label>msg:search_extended_titres_uniformes</label>
		</group>
		<group id="14">
            <order>18</order>
            <label>msg:search_access_rights_group</label>
        </group>
		<group id="101">
			<order>14</order>
			<label>msg:search_custom_notices</label>
		</group>
		<group id="102">
			<order>15</order>
			<label>msg:search_custom_expl</label>
		</group>
		<group id="103">
			<order>16</order>
			<label>msg:search_custom_explnum</label>
		</group>
		<group id="1001">
			<order>17</order>
			<label>msg:recherches_query</label>
		</group>
	</groups>
</pmbfields>